(function(){
var profileID = 18770;
var domainID = 11168;
var _vbTrackDomain = "https://dotcms-qa-master.dotcms.site";
var vbt_baseURL = "https://www.vbt.io/";
var _vbSessionId = "1694547814::1214467509";
var _uniqueTime = 1694547814;
var __vbtpEmail = "";
var __vbtpName = "";

var track_contact_id = 0;

var visitorIP = "71.184.123.101";
var country = 'united states';
var state = 'massachusetts';
var city = 'andover';
var isp = 'verizon fios';
var organization = 'verizon fios';

var isHeatmapEnabled = 0;
var isGoalEnabled = 1;
var isWebhookEnabled = 0;
var isLinkMappingEnabled = 1;
var isVideoMappingEnabled = 1;
var isFormMappingEnabled = 1;

var actionsDependentFields = {};

var actionsGoals = [];
var actionsEntry = [];
var actionsExit = [];
var actionsMiddle = [];
var actionsEnd = [];
var goals = {"_":[]};
var vBrandingWebhook = "<a href=\"https:\/\/www.vbout.com\/?utm_source=Starter&utm_medium=Pop-Up&utm_campaign=dotCMS+LLC&utm_content=powered-by\" target=\"_blank\" style=\"display: inline-block;\" title=\"Powered by VBOUT\"><img src=\"https:\/\/app.vbout.com\/images\/vbout\/powered-by-small.png\" alt=\"Powered by VBOUT\" style=\"cursor: pointer;\" border=\"0\" \/><\/a>";
var vBrandingWebpush = "<a href=\"https:\/\/www.vbout.com\/?utm_source=Starter&utm_medium=Web-Push&utm_campaign=dotCMS+LLC&utm_content=powered-by\" target=\"_blank\" style=\"display: inline-block;\" title=\"Powered by VBOUT\"><img src=\"https:\/\/app.vbout.com\/images\/vbout\/powered-by-small.png\" alt=\"Powered by VBOUT\" style=\"cursor: pointer;\" border=\"0\" \/><\/a>";
(function (vbset, vbTracker) {
	if(window._vbTracker_) return;
	window._vbTracker_ = true;
window._vbTracker=vbTracker||{},window._vbset=vbset||[];var _vbsetData={account:"",domain:"",ecommerce:"",type:"",amount:""},countriesList={AF:"Afghanistan",AX:"Åland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",BQ:"British Antarctic Territory",IO:"British Indian Ocean Territory",VG:"British Virgin Islands",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CT:"Canton and Enderbury Islands",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos [Keeling] Islands",CO:"Colombia",KM:"Comoros",CG:"Congo - Brazzaville",CD:"Congo - Kinshasa",CK:"Cook Islands",CR:"Costa Rica",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",CI:"Côte d’Ivoire",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",NQ:"Dronning Maud Land",DD:"East Germany",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",FQ:"French Southern and Antarctic Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and McDonald Islands",HN:"Honduras",HK:"Hong Kong SAR China",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JT:"Johnston Island",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau SAR China",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",FX:"Metropolitan France",MX:"Mexico",FM:"Micronesia",MI:"Midway Islands",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar [Burma]",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NT:"Neutral Zone",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",KP:"North Korea",VD:"North Vietnam",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PC:"Pacific Islands Trust Territory",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territories",PA:"Panama",PZ:"Panama Canal Zone",PG:"Papua New Guinea",PY:"Paraguay",YD:"People's Democratic Republic of Yemen",PE:"Peru",PH:"Philippines",PN:"Pitcairn Islands",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RO:"Romania",RU:"Russia",RW:"Rwanda",RE:"Réunion",BL:"Saint Barthélemy",SH:"Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and the Grenadines",WS:"Samoa",SM:"San Marino",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",CS:"Serbia and Montenegro",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and the South Sandwich Islands",KR:"South Korea",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syria",ST:"São Tomé and Príncipe",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UM:"U.S. Minor Outlying Islands",PU:"U.S. Miscellaneous Pacific Islands",VI:"U.S. Virgin Islands",UG:"Uganda",UA:"Ukraine",SU:"Union of Soviet Socialist Republics",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",ZZ:"Unknown or Invalid Region",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican City",VE:"Venezuela",VN:"Vietnam",WK:"Wake Island",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",EU:"European Union"},autocompleteArray={countries:{},states:{},cities:{}},autocompleteEvents={},dataLoader=function(n,t){var a,o=n,f=null,i=[];this.load=function(n){f?n&&n(f):(n&&i.push(n),a=a||$vbtJQ.getJSON(o,{},(function(n){var a;for(n=n||{},n=t?t(n):n,f=n||{};a=i.shift();)a(f)})))}},vbtIpInfo=function(){var vbtIpInfo;return new function(){var i,o=null,t=[];this.load=function(n){o?n(o):(t.push(n),i=i||ajaxGet("https://ipinfo.io/json",{},(function(n){var i;for(o=n||{};i=t.shift();)i(o)})))}}}(),k;is_array(_vbset)&&_vbset.forEach((function(vbvar){(k=trim(vbvar[0],"_"))in _vbsetData&&(_vbsetData[k]=vbvar[1])}));var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;for(e=Base64._utf8_encode(e);f<e.length;)s=(n=e.charCodeAt(f++))>>2,o=(3&n)<<4|(r=e.charCodeAt(f++))>>4,u=(15&r)<<2|(i=e.charCodeAt(f++))>>6,a=63&i,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+Base64._keyStr.charAt(s)+Base64._keyStr.charAt(o)+Base64._keyStr.charAt(u)+Base64._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;for((e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length%4!=0&&(e+="=".repeat(4-e.length%4));f<e.length;)n=(s=Base64._keyStr.indexOf(e.charAt(f++)))<<2|(o=Base64._keyStr.indexOf(e.charAt(f++)))>>4,r=(15&o)<<4|(u=Base64._keyStr.indexOf(e.charAt(f++)))>>2,i=(3&u)<<6|(a=Base64._keyStr.indexOf(e.charAt(f++))),t+=String.fromCharCode(n),64!=u&&(t+=String.fromCharCode(r)),64!=a&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}},localStorageSupported="undefined"!=typeof Storage;function serialize(form){if(form&&"FORM"===form.nodeName){var i,j,q=[];for(i=form.elements.length-1;i>=0;i-=1)if(""!==form.elements[i].name)switch(form.elements[i].nodeName){case"INPUT":switch(form.elements[i].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"checkbox":case"radio":form.elements[i].checked&&q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value))}break;case"TEXTAREA":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"SELECT":switch(form.elements[i].type){case"select-one":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value));break;case"select-multiple":for(j=form.elements[i].options.length-1;j>=0;j-=1)form.elements[i].options[j].selected&&q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].options[j].value))}break;case"BUTTON":switch(form.elements[i].type){case"reset":case"submit":case"button":q.push(form.elements[i].name+"="+encodeURIComponent(form.elements[i].value))}}return q.join("&")}}var isValidJSON=function(r){if(0===String(r).length)return!1;try{var t=JSON.parse(r);if(t&&"object"==typeof t&&!(t instanceof Array))return!0}catch(r){return!1}return!1};function tryParseJSON(jsonString){try{var o=JSON.parse(jsonString);if(o&&"object"==typeof o&&null!==o)return o}catch(e){}return!1}var vbt_IsMobileDevice=function(){return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())},$vbtJQ;function vbt_GetParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function vbt_removeFromURL(url,parm){return url.replace(new RegExp("([?&])("+parm+")=([^&]*)","gi"),(function(m,s){return"?"==s?"?":""}))}function nowYSMnowYDT(t){"none"===window.getComputedStyle(t).display?setTimeout(nowYSMnowYDT,1e3,t):t.setAttribute("src",t.getAttribute("src").replace(/[?&]rel=0/,"").replace(/[?&]autoplay=true/,""))}function vbt_IsEmptyObject(t){return 0===Object.keys(t).length}function vbt_PopulateSubscriberInfo(){var e=new RegExp("[; ]__ssInfo=([^\\s;]*)"),o=(" "+document.cookie).match(e),t={};if(o&&(t=JSON.parse(Base64.decode(o[1]))),vbt_IsEmptyObject(t))console.log("Information not exists, trying to get it..."),vbt_GetSubscriberInfo(!1);else for(var l in console.log("Information exists, trying to populate it..."),t)"email"==l?((document.querySelectorAll(".form-control.email")||{}).value=t[l],(document.querySelectorAll("[type=email]")||{}).value=t[l]):(document.querySelector("#custom-"+l)||{}).value=t[l]}function vbt_GetSubscriberInfo(e){if(3477!=profileID){var t=new RegExp("[; ]__ssId=([^\\s;]*)"),n=(" "+document.cookie).match(t),o=0,a=[];if(n&&(o=unescape(n[1])),t=new RegExp("[; ]__ssInfo=([^\\s;]*)"),(n=(" "+document.cookie).match(t))&&(a=unescape(n[1])),parseInt(o)>0&&(0==a.length||e)){var s;s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var c=vbt_baseURL+"tracker/subscriber/info/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,i="userId="+o;s.open("POST",c,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){data=JSON.parse(s.responseText);var e=new Date((new Date).getTime()+6048e5);document.cookie="__ssInfo="+Base64.encode(JSON.stringify(data.info))+"; expires="+e.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath,vbt_PopulateSubscriberInfo()}},s.send(i)}}}function vbt_setCookie(name,value,hours){if(isNaN(hours)||hours<0)return vbt_deleteCookie(name);var expires=new Date((new Date).getTime()+3600*hours*1e3).toUTCString();document.cookie=name+"="+escape(value||"")+"; expires="+expires+";domain="+_cookieDomain+";path="+_cookiePath}function vbt_deleteCookie(name){document.cookie=name+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+_cookieDomain+";path="+_cookiePath}function vbt_getCookie(e){var o=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return o?decodeURIComponent(o[1]):void 0}function vbt_setLocalStorage(name,value){if(localStorageSupported)try{window.localStorage.setItem(name,value)}catch(e){return console.log("setStorage: Error setting key ["+key+"] in localStorage: "+JSON.stringify(e)),!1}}function vbt_getLocalStorage(name){if(localStorageSupported)try{return window.localStorage.getItem(name)}catch(e){return console.log("getStorage: Error reading key ["+key+"] from localStorage: "+JSON.stringify(e)),null}}function vbt_deleteLocalStorage(name){if(localStorageSupported)try{window.localStorage.removeItem(name)}catch(e){return console.log("removeStorage: Error removing key ["+key+"] from localStorage: "+JSON.stringify(e)),!1}}function vbt_createElement(e,t,n,r){var a=document.createElement(e);if(r)for(var i in r)a.setAttribute(i,r[i]);return n&&(a.innerHTML=n),t&&t.appendChild(a),a}function vbt_getRandomInt(n,t){return Math.floor(Math.random()*(t-n+1))+n}function vbt_getValueFromURL(e,n){var o=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(e);return o?decodeURIComponent(o[1]):""}function closestTag(e,r){if(!r)return null;for(r=r.toUpperCase(r);!e.parentNode||e.parentNode.tagName!=r;)if(!(e=e.parentNode))return null;return e.parentNode}function getClosest(element,selector,itself){for(var elem=element;elem&&elem!==document;elem=elem.parentNode)if(elem.matches(selector)&&(!1!==itself||elem!=element))return elem;return null}function hasClass(s,a){return s&&-1<(" "+s.className+" ").indexOf(" "+a+" ")}function vbt_matchUrl(e,t,p){if(""!=t)if(e=e.toLowerCase().replace(/\/?$/,"/"),"1"==p){if(t==e||t==e.replace("https://","https://www.")||t==e.replace("http://","http://www."))return!0}else if("2"==p){if(e.indexOf("http://www.")||e.indexOf("https://www.")){if(-1!=e.indexOf(t.replace(/\/?$/,""))||-1!=e.replace("http://www.","http://").indexOf(t.replace(/\/?$/,""))||-1!=e.replace("https://www.","https://").indexOf(t.replace(/\/?$/,"")))return!0}else if(-1!=e.indexOf(t.replace(/\/?$/,""))||-1!=e.replace("http://","http://www.").indexOf(t.replace(/\/?$/,""))||-1!=e.replace("https://","https://www.").indexOf(t.replace(/\/?$/,"")))return!0}else if("3"==p){if(0==e.indexOf(t)||0==e.replace("http://","http://www.").indexOf(t)||0==e.replace("https://","https://www.").indexOf(t))return!0}else if(t==e.slice(-t.length)||t==e.replace("http://","http://www.").slice(-t.length)||t==e.replace("https://","https://www.").slice(-t.length))return!0;return!1}function vbt_matchUrls___XX(page,urls,allowEmpty){if(is_array(urls)){var match,pagePath,urlPath,pageAnchor=document.createElement("a"),urlAnchor=document.createElement("a");pageAnchor.href=page,pagePath=(pageAnchor.pathname+""+pageAnchor.search).toLowerCase();for(var i=0,len=urls.length;i<len;i++){if(allowEmpty&&empty(urls[i].url))return urls[i];switch(0===urls[i].url.indexOf(pageAnchor.host)?(urlAnchor.href=urls[i].url.substring(pageAnchor.host.length),urlPath=ltrim(urlAnchor.pathname+""+urlAnchor.search,"/").toLowerCase()):0===urls[i].url.indexOf("http://")||0===urls[i].url.indexOf("https://")||0===urls[i].url.indexOf("//")?(urlAnchor.href=urls[i].url,urlPath=ltrim(urlAnchor.pathname+""+urlAnchor.search,"/").toLowerCase()):urlPath=urls[i].url.toLowerCase(),String(urls[i].regex)){case"1":match=trim(pagePath,"/")==trim(urlPath,"/");break;case"2":match=-1!==pagePath.indexOf(urlPath);break;case"3":match=0===ltrim(pagePath,"/").indexOf(ltrim(urlPath,"/"));break;case"4":match=-1!==pagePath.indexOf(page.url,pagePath.length-urlPath.length)}if(match)return urls[i]}}return!1}function addEventsListener(dom,events,callback){dom&&events.split(" ").forEach((function(event){empty(event)||dom.addEventListener(event,callback)}))}function fireEvent(element,event,bubbles=!0){if("createEvent"in document){var evt=document.createEvent("HTMLEvents");evt.initEvent(event,bubbles,!0),element.dispatchEvent(evt)}else element.fireEvent("on"+event)}function addDelegationEventsListener(dom,selector,events,callback){dom&&events.split(" ").forEach((function(event){empty(event)||dom.addEventListener(event,(function(e){e.target&&e.target.matches(selector)&&callback.apply(e.target,arguments)}))}))}function vbt_getAjax(url,callback){var xmlhttp;xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),callback&&(xmlhttp.onreadystatechange=callback),xmlhttp.open("GET",url,!0),xmlhttp.send(null)}function ajaxRequest(method,url,data,callback,errorCallback){var xhr;try{"withCredentials"in(xhr=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"))||(xhr=new XDomainRequest),xhr.open(method,url,1),data instanceof FormData||xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.onreadystatechange=function(){if(4==xhr.readyState)if("200"==xhr.status){if("function"==typeof callback)try{var json=JSON.parse(xhr.responseText);callback(json)}catch(e){callback({})}}else"function"==typeof errorCallback&&errorCallback(xhr)},xhr.send(data||null)}catch(e){window.console&&console.log(e)}return xhr}function ajaxGet(url,data,callback,errorCallback){return ajaxRequest("GET",(url+=url.indexOf("?")>-1?"&":"?")+formatParams(data),{},callback,errorCallback)}function ajaxPost(url,data,callback,errorCallback){return ajaxRequest("POST",url,formatParams(data),callback,errorCallback)}function ajaxPostFormData(url,form,callback,errorCallback){var data;return ajaxRequest("POST",url,new FormData(form),callback,errorCallback)}function formatParams(params){return"object"!=typeof params&&(params={}),Object.keys(params).map((function(key){if("object"==typeof params[key]){var q=[];for(var i in params[key])q.push(key+"["+i+"]="+params[key][i]);return q.join("&")}return key+"="+params[key]})).join("&")}function param(object){if("string"==typeof object)return object;var encodedString=[];for(var prop in object)if(object.hasOwnProperty(prop))if("object"==typeof object[prop])for(var i in object[prop])q.push(prop+"["+i+"]="+encodeURI(object[prop][i]));else encodedString.push(prop+"="+encodeURI(object[prop]));return encodedString.join("&")}function vbt_matchUrls(page,urls,allowEmpty){if(is_array(urls)){var match,pagePath,urlPath,pageAnchor=document.createElement("a"),urlAnchor=document.createElement("a");0===(pagePath=(pagePath=(pagePath=decodeURIComponent(page.toLowerCase())).replace(/\&?\_\_vbtrk\=[a-zA-Z0-9\=]+/,"")).replace(/\&?\_uax\=[a-zA-Z0-9\=]+/,"")).indexOf("http://")?pagePath=pagePath.substring(7):0===pagePath.indexOf("https://")&&(pagePath=pagePath.substring(8)),0===pagePath.indexOf("www.")&&(pagePath=pagePath.substring(4)),pageAnchor.href="http://"+pagePath;for(var i=0,len=urls.length;i<len;i++){if(allowEmpty&&empty(urls[i].url))return urls[i];switch(0===(urlPath=urls[i].url.toLowerCase()).indexOf("http://")?urlPath=urlPath.substring(7):0===urlPath.indexOf("https://")&&(urlPath=urlPath.substring(8)),0===urlPath.indexOf("www.")&&(urlPath=urlPath.substring(4)),String(urls[i].regex)){case"1":(match=trim(pagePath,"/")==trim(urlPath,"/"))||(match=trim(pagePath,"/")==pageAnchor.host+"/"+trim(urlPath,"/"));break;case"2":match=-1!==pagePath.indexOf(urlPath);break;case"3":(match=0===ltrim(pagePath,"/").indexOf(ltrim(urlPath,"/")))||(match=0===ltrim(pagePath,"/").indexOf(pageAnchor.host+"/"+ltrim(urlPath,"/")));break;case"4":match=-1!==pagePath.indexOf(page.url,pagePath.length-urlPath.length)}if(match)return urls[i]}}return!1}function empty(r){var n,t,e,f=[void 0,null,!1,0,"","0"];for(t=0,e=f.length;e>t;t++)if(r===f[t])return!0;if("object"==typeof r){for(n in r)if(r.hasOwnProperty(n))return!1;return!0}return!1}function trim(r,n){var t,e=0,f=0;for(r+="",t=n?(n+="").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \n\r\t\f\v            ​\u2028\u2029　",e=r.length,f=0;f<e;f++)if(-1===t.indexOf(r.charAt(f))){r=r.substring(f);break}for(f=(e=r.length)-1;f>=0;f--)if(-1===t.indexOf(r.charAt(f))){r=r.substring(0,f+1);break}return-1===t.indexOf(r.charAt(0))?r:""}function ltrim(e,r){r=r?(r+"").replace(/([[\]().?/*{}+$^:])/g,"$1"):" \\s ";var n=new RegExp("^["+r+"]+","g");return(e+"").replace(n,"")}function is_array(e){var t,n;if(!e||"object"!=typeof e)return!1;if(function(e){if(!e||"object"!=typeof e||"number"!=typeof e.length)return!1;var t=e.length;return e[e.length]="bogus",t!==e.length?(e.length-=1,!0):(delete e[e.length],!1)}(e))return!0;if("on"===(("undefined"!=typeof require?require("../info/ini_get")("locutus.objectsAsArrays"):void 0)||"on")){var r=Object.prototype.toString.call(e),o=(t=e.constructor,(n=/\W*function\s+([\w$]+)\s*\(/.exec(t))?n[1]:"(Anonymous)");if("[object Object]"===r&&"Object"===o)return!0}return!1}function in_array(r,n){var i="";for(i in n)if(n[i]==r)return!0;return!1}function ifElement(f,s){return!!f.querySelector(s)}function foreach(f,s,o){var re=!1;if("function"==typeof o)for(var r=f.querySelectorAll(s),e=0,l=r.length;e<l;e++)if(re=!0,!1===o.call(r[e])){re=!1;break}return re}function vbt_attachEvent(dom,event,callback,useCapture){return dom.attachEvent?dom.attachEvent("on"+event,callback,useCapture||!1):dom.addEventListener(event,callback)}function vbt_loadJs(file,callback){var script=document.createElement("script");script.loaded=!1,script.setAttribute("src",file),script.setAttribute("type","text/javascript");var loadFunction=function(){script.loaded||(script.loaded=!0,"function"==typeof callback&&callback(script))};script.onload=function(){script.loaded||(script.loaded=!0,"function"==typeof callback&&callback(script))},script.onreadystatechange=function(){if("complete"==this.readyState||"loaded"==this.readyState){if(script.loaded)return;script.loaded=!0,"function"==typeof callback&&callback(script)}},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(script)}function vbt_loadStyle(file,callback){var style=document.createElement("link");style.loaded=!1,style.setAttribute("href",file),style.setAttribute("type","text/css"),style.setAttribute("rel","stylesheet");var loadFunction=function(){style.loaded||(style.loaded=!0,"function"==typeof callback&&callback(style))};style.onload=function(){style.loaded||(style.loaded=!0,"function"==typeof callback&&callback(style))},style.onreadystatechange=function(){if("complete"==this.readyState||"loaded"==this.readyState){if(style.loaded)return;style.loaded=!0,"function"==typeof callback&&callback(style)}},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(style)}var visitor={},visitorTrackInfo={},intlTelLib,intlTelQueue=[],actionAlreadySent=!1;_vbset.setVal=function(e){var a=e||[];if((void 0!==a||null!==a)&&a instanceof Array){var o=new Date((new Date).getTime()+6048e5);document.cookie="__vbvar__"+a[0]+"="+escape(a[1])+"; expires="+o.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath}};var _jqueryAlreadyLoaded=!1,_jqueryCurrentVersion="0.0",_uniquePagesTracking=[],regUrlDomain=/:\/\/(.[^/]+)/,regUrlPath=/.+?\:\/\/.+?(\/.+?)(?:#|\?|$)/,_cookieDomain=_vbTrackDomain.match(regUrlDomain)[1];_cookieDomain="."+(_cookieDomain=_cookieDomain.replace(new RegExp(/^www\./i),""));var _cookiePath="/",_forceCustomViewPage=!1,_customViewPage=document.URL;if(1191!=domainID)try{_cookiePath=_vbTrackDomain.match(regUrlPath)[1]}catch(err){}var _actionsQueue=[],_actionInProgress=!1,_actionExitExec=[],_actionMiddleQueue=[],_actionEndQueue=[],__funnelAddActionTimer=null,__GLOBAL__TIMER=null,__GLOBAL__TIMER_FLAG=0,filterDevice=0,forceSSID=!0;try{__ssId}catch(e){"ReferenceError"==e.name&&(forceSSID=!1)}if(forceSSID&&void 0!==__ssId&&null!==__ssId&&(vbt_setCookie("__ssId",__ssId,168),console.log("Subscriber Founded.")),isHeatmapEnabled)var heat_data=[],scrollheat_data=[],scrollTimeout=null,scrollheatSending=!1,heatDrawingTimer=null,scrollheatDrawingTimer=null,heat=null;var clickmap_active=!1,heatmap_active=!1,scrollmap_active=!1,clickmap_loading=!1,heatmap_loading=!1,scrollmap_loading=!1,isMappingFlagEnabled=!1,mapping=vbt_getValueFromURL(location.href,"mapping");if(mapping)try{var mapString=Base64.decode(mapping);if((mapString=JSON.parse(mapString.replace(/}.*/,"")+"}"))._account==_vbsetData.account){isMappingFlagEnabled=!0,filterDevice=__checkIfMobileDevice()?1:mapString._device;for(var tAnchors=document.getElementsByTagName("a"),numAnchors=tAnchors.length,i=0;i<numAnchors;i++){var href=tAnchors[i].getAttribute("href");href&&(href+=(href.match(/\?/)?"&":"?")+"mapping="+mapping,tAnchors[i].setAttribute("href",href))}console.log("filter: activated")}else console.log("filter: not activated ... prb: domain mistmatch!")}catch(e){console.log("filter: not activated ... prb: code error!"),console.log(e),console.log(vbt_GetParameterByName("mapping")),console.log(Base64.decode(vbt_GetParameterByName("mapping"))),console.log(mapString)}_vbset.forEach((function(e){if("__vbvar__"==e[0])if("_listID"==e[1][0]){var i=new Date((new Date).getTime()+6048e5);document.cookie="__vbset__list="+escape(e[1][1])+"; expires="+i.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath}else/^\_email(\-[0-9]+)?$/i.test(e[1][0])&&(i=new Date((new Date).getTime()+6048e5),document.cookie="__vbset__email="+escape(e[1][1])+"; expires="+i.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath)}));var _actionsBank={};function versionCompare(a,b){a=a.split("."),b=b.split(".");var max=Math.max(a.length,b.length),ai,bi;console.log("a",a),console.log("b",b),console.log("max",max);for(var i=0;i<max;i++){if(ai=~~a[i]||0,bi=~~b[i]||0,console.log("ai - bi",ai,bi),ai>bi)return 1;if(ai<bi)return-1}return 0}function loadJQueryMigrate(){try{0===(jQuery.fn.jquery+"").indexOf("3")?(void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e){"function"==typeof define&&define.amd?define(["jquery"],window,e):"object"==typeof module&&module.exports?module.exports=e(require("jquery"),window):e(jQuery,window)}((function(e,t){"use strict";function r(r){var n=t.console;a[r]||(a[r]=!0,e.migrateWarnings.push(r),n&&n.warn&&!e.migrateMute&&(n.warn("JQMIGRATE: "+r),e.migrateTrace&&n.trace&&n.trace()))}function n(e,t,n,o){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return r(o),n},set:function(e){r(o),n=e}})}function o(e,t,n,o){e[t]=function(){return r(o),n.apply(this,arguments)}}e.migrateVersion="3.0.1",t.console&&t.console.log&&(e&&!/^[12]\./.test(e.fn.jquery)||t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),e.migrateWarnings&&t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),t.console.log("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion));var a={};e.migrateWarnings=[],void 0===e.migrateTrace&&(e.migrateTrace=!0),e.migrateReset=function(){a={},e.migrateWarnings.length=0},"BackCompat"===t.document.compatMode&&r("jQuery is not compatible with Quirks Mode");var i,s=e.fn.init,u=e.isNumeric,c=e.find,l=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,d=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;for(i in e.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(r("jQuery( '#' ) is not a valid selector"),t[0]=[]),s.apply(this,t)},e.fn.init.prototype=e.fn,e.find=function(e){var n=Array.prototype.slice.call(arguments);if("string"==typeof e&&l.test(e))try{t.document.querySelector(e)}catch(o){e=e.replace(d,(function(e,t,r,n){return"["+t+r+'"'+n+'"]'}));try{t.document.querySelector(e),r("Attribute selector with '#' must be quoted: "+n[0]),n[0]=e}catch(e){r("Attribute selector with '#' was not fixed: "+n[0])}}return c.apply(this,n)},c)Object.prototype.hasOwnProperty.call(c,i)&&(e.find[i]=c[i]);e.fn.size=function(){return r("jQuery.fn.size() is deprecated and removed; use the .length property"),this.length},e.parseJSON=function(){return r("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},e.isNumeric=function(t){var n,o,a=u(t),i=(o=(n=t)&&n.toString(),!e.isArray(n)&&o-parseFloat(o)+1>=0);return a!==i&&r("jQuery.isNumeric() should not be called on constructed objects"),i},o(e,"holdReady",e.holdReady,"jQuery.holdReady is deprecated"),o(e,"unique",e.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),n(e.expr,"filters",e.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),n(e.expr,":",e.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos");var p=e.ajax;e.ajax=function(){var e=p.apply(this,arguments);return e.promise&&(o(e,"success",e.done,"jQXHR.success is deprecated and removed"),o(e,"error",e.fail,"jQXHR.error is deprecated and removed"),o(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e};var f=e.fn.removeAttr,y=e.fn.toggleClass,m=/\S+/g;e.fn.removeAttr=function(t){var n=this;return e.each(t.match(m),(function(t,o){e.expr.match.bool.test(o)&&(r("jQuery.fn.removeAttr no longer sets boolean properties: "+o),n.prop(o,!1))})),f.apply(this,arguments)},e.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?y.apply(this,arguments):(r("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each((function(){var r=this.getAttribute&&this.getAttribute("class")||"";r&&e.data(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":e.data(this,"__className__")||"")})))};var h=!1;e.swap&&e.each(["height","width","reliableMarginRight"],(function(t,r){var n=e.cssHooks[r]&&e.cssHooks[r].get;n&&(e.cssHooks[r].get=function(){var e;return h=!0,e=n.apply(this,arguments),h=!1,e})})),e.swap=function(e,t,n,o){var a,i,s={};for(i in h||r("jQuery.swap() is undocumented and deprecated"),t)s[i]=e.style[i],e.style[i]=t[i];for(i in a=n.apply(e,o||[]),t)e.style[i]=s[i];return a};var g=e.data;e.data=function(t,n,o){var a;if(n&&"object"==typeof n&&2===arguments.length){a=e.hasData(t)&&g.call(this,t);var i={};for(var s in n)s!==e.camelCase(s)?(r("jQuery.data() always sets/gets camelCased names: "+s),a[s]=n[s]):i[s]=n[s];return g.call(this,t,i),n}return n&&"string"==typeof n&&n!==e.camelCase(n)&&(a=e.hasData(t)&&g.call(this,t))&&n in a?(r("jQuery.data() always sets/gets camelCased names: "+n),arguments.length>2&&(a[n]=o),a[n]):g.apply(this,arguments)};var v=e.Tween.prototype.run,j=function(e){return e};e.Tween.prototype.run=function(){e.easing[this.easing].length>1&&(r("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),e.easing[this.easing]=j),v.apply(this,arguments)},e.fx.interval=e.fx.interval||13,t.requestAnimationFrame&&n(e.fx,"interval",e.fx.interval,"jQuery.fx.interval is deprecated");var Q=e.fn.load,b=e.event.add,w=e.event.fix;e.event.props=[],e.event.fixHooks={},n(e.event.props,"concat",e.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),e.event.fix=function(t){var n,o=t.type,a=this.fixHooks[o],i=e.event.props;if(i.length)for(r("jQuery.event.props are deprecated and removed: "+i.join());i.length;)e.event.addProp(i.pop());if(a&&!a._migrated_&&(a._migrated_=!0,r("jQuery.event.fixHooks are deprecated and removed: "+o),(i=a.props)&&i.length))for(;i.length;)e.event.addProp(i.pop());return n=w.call(this,t),a&&a.filter?a.filter(n,t):n},e.event.add=function(e,n){return e===t&&"load"===n&&"complete"===t.document.readyState&&r("jQuery(window).on('load'...) called after load event occurred"),b.apply(this,arguments)},e.each(["load","unload","error"],(function(t,n){e.fn[n]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===n&&"string"==typeof e[0]?Q.apply(this,e):(r("jQuery.fn."+n+"() is deprecated"),e.splice(0,0,n),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}})),e.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,n){e.fn[n]=function(e,t){return r("jQuery.fn."+n+"() event shorthand is deprecated"),arguments.length>0?this.on(n,null,e,t):this.trigger(n)}})),e((function(){e(t.document).triggerHandler("ready")})),e.event.special.ready={setup:function(){this===t.document&&r("'ready' event is deprecated")}},e.fn.extend({bind:function(e,t,n){return r("jQuery.fn.bind() is deprecated"),this.on(e,null,t,n)},unbind:function(e,t){return r("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,n,o){return r("jQuery.fn.delegate() is deprecated"),this.on(t,e,n,o)},undelegate:function(e,t,n){return r("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return r("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});var x=e.fn.offset;e.fn.offset=function(){var n,o=this[0],a={top:0,left:0};return o&&o.nodeType?(n=(o.ownerDocument||t.document).documentElement,e.contains(n,o)?x.apply(this,arguments):(r("jQuery.fn.offset() requires an element connected to a document"),a)):(r("jQuery.fn.offset() requires a valid DOM element"),a)};var k=e.param;e.param=function(t,n){var o=e.ajaxSettings&&e.ajaxSettings.traditional;return void 0===n&&o&&(r("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),n=o),k.call(this,t,n)};var A=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),A.apply(this,arguments)};var S=e.Deferred,q=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]];return e.Deferred=function(t){var n=S(),o=n.promise();return n.pipe=o.pipe=function(){var t=arguments;return r("deferred.pipe() is deprecated"),e.Deferred((function(r){e.each(q,(function(a,i){var s=e.isFunction(t[a])&&t[a];n[i[1]]((function(){var t=s&&s.apply(this,arguments);t&&e.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[i[0]+"With"](this===o?r.promise():this,s?[t]:arguments)}))})),t=null})).promise()},t&&t.call(n,n),n},e.Deferred.exceptionHook=S.exceptionHook,e}))):(
/*! jQuery Migrate v1.4.1 | (c) jQuery Foundation and other contributors | jquery.org/license */
void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(g){}a._definePropertyBroken=!0,b[c]=e}a.migrateVersion="1.4.1";var f={};a.migrateWarnings=[],b.console&&b.console.log&&b.console.log("JQMIGRATE: Migrate is installed"+(a.migrateMute?"":" with logging active")+", version "+a.migrateVersion),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return!0===f||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&!1!==e.nodeValue?d.toLowerCase():c},set:function(b,c,d){var e;return!1===c?a.removeAttr(b,d):((e=a.propFix[d]||d)in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') might use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.find,s=a.parseJSON,t=/^\s*</,u=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,v=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,w=/^([^<]*)(<[\w\W]+>)([^>]*)$/,x;for(x in a.fn.init=function(b,e,f){var g,h;return b&&"string"==typeof b&&!a.isPlainObject(e)&&(g=w.exec(a.trim(b)))&&g[0]&&(t.test(b)||d("$(html) HTML strings must start with '<' character"),g[3]&&d("$(html) HTML text after last tag is ignored"),"#"===g[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),e&&e.context&&e.context.nodeType&&(e=e.context),a.parseHTML)?q.call(this,a.parseHTML(g[2],e&&e.ownerDocument||e||document,!0),e,f):(h=q.apply(this,arguments),b&&b.selector!==c?(h.selector=b.selector,h.context=b.context):(h.selector="string"==typeof b?b:"",b&&(h.context=b.nodeType?b:e||document)),h)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&u.test(a))try{document.querySelector(a)}catch(c){a=a.replace(v,(function(a,b,c,d){return"["+b+c+'"'+d+'"]'}));try{document.querySelector(a),d("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){d("Attribute selector with '#' was not fixed: "+b[0])}}return r.apply(this,b)},r)Object.prototype.hasOwnProperty.call(r,x)&&(a.find[x]=r[x]);a.parseJSON=function(a){return a?s.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(p={},(o=a.uaMatch(navigator.userAgent)).browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.boxModel=a.support.boxModel="CSS1Compat"===document.compatMode,e(a,"boxModel",a.boxModel,"jQuery.boxModel is deprecated"),e(a.support,"boxModel",a.support.boxModel,"jQuery.support.boxModel is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){var f=a.fn.init.call(this,d,e,c);return f instanceof b?f:b(f)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.fn.size=function(){return d("jQuery.fn.size() is deprecated; use the .length property"),this.length};var y=!1;a.swap&&a.each(["height","width","reliableMarginRight"],(function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return y=!0,a=d.apply(this,arguments),y=!1,a})})),a.swap=function(a,b,c,e){var f,g,h={};for(g in y||d("jQuery.swap() is undocumented and deprecated"),b)h[g]=a.style[g],a.style[g]=b[g];for(g in f=c.apply(a,e||[]),b)a.style[g]=h[g];return f},a.ajaxSetup({converters:{"text json":a.parseJSON}});var z=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?z.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var A=/\/(java|ecma)script/i;a.clean||(a.clean=function(b,c,e,f){c=(c=!(c=c||document).nodeType&&c[0]||c).ownerDocument||c,d("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){return!a.type||A.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(e.appendChild(h),void 0!==h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var B=a.event.add,C=a.event.remove,D=a.event.trigger,E=a.fn.toggle,F=a.fn.live,G=a.fn.die,H=a.fn.load,I="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",J=new RegExp("\\b(?:"+I+")\\b"),K=/(?:^|\s)hover(\.\S+|)\b/,L=function(b){return"string"!=typeof b||a.event.special.hover?b:(K.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(K,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&J.test(b)&&d("AJAX events should be attached to document: "+b),B.call(this,a,L(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){C.call(this,a,L(b)||"",c,d,e)},a.each(["load","unload","error"],(function(b,c){a.fn[c]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===c&&"string"==typeof a[0]?H.apply(this,a):(d("jQuery.fn."+c+"() is deprecated"),a.splice(0,0,c),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this))}})),a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return E.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),F?F.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),G?G.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||J.test(a)||d("Global events are undocumented and deprecated"),D.call(this,a,b,c||document,e)},a.each(I.split("|"),(function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,(function(){a.event.trigger(c,Array.prototype.slice.call(arguments,1),b,!0)})),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}})),a.event.special.ready={setup:function(){this===document&&d("'ready' event is deprecated")}};var M=a.fn.andSelf||a.fn.addBack,N=a.fn.find;if(a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),M.apply(this,arguments)},a.fn.find=function(a){var b=N.apply(this,arguments);return b.context=this.context,b.selector=this.selector?this.selector+" "+a:a,b},a.Callbacks){var O=a.Deferred,P=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var c=O(),e=c.promise();return c.pipe=e.pipe=function(){var b=arguments;return d("deferred.pipe() is deprecated"),a.Deferred((function(d){a.each(P,(function(f,g){var h=a.isFunction(b[f])&&b[f];c[g[1]]((function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(d.resolve).fail(d.reject).progress(d.notify):d[g[0]+"With"](this===e?d.promise():this,h?[b]:arguments)}))})),b=null})).promise()},c.isResolved=function(){return d("deferred.isResolved is deprecated"),"resolved"===c.state()},c.isRejected=function(){return d("deferred.isRejected is deprecated"),"rejected"===c.state()},b&&b.call(c,c),c}}}(jQuery,window))}catch(e){}}function _exec_vbout(){"function"!=typeof Object.create&&(Object.create=function(o){function F(){}return F.prototype=o,new F}),visitor=Object.create(_vbTracker.visitorInfo),visitorTrackInfo=Object.create(_vbTracker.trackEventsInfo),isMappingFlagEnabled?vbt_deleteLocalStorage("__ts__"):vbt_getLocalStorage("__ts__")&&visitorTrackInfo.processTimeSpend(!0),visitor.initialize(),visitorTrackInfo.initialize(visitor.__ukey),isMappingFlagEnabled||vbt_attachEvent(window,"beforeunload",(function(e){visitorTrackInfo.processTimeSpend(!1)})),visitor.process(),visitor.execTracker(),console.log("================================================="),console.log("vbout Tracker X: ("+_vbsetData.account+") is activated."),console.log("================================================="),console.log("Page viewed: "+visitor.page),console.log("Page IP: "+visitor.ip+" From "+visitor.country+" / "+visitor.state),console.log("jQuery Loaded: "+_jqueryAlreadyLoaded),_jqueryAlreadyLoaded&&console.log("jQuery Version: "+_jqueryCurrentVersion),console.log("Cookie Domain: "+_cookieDomain),console.log("Cookie Path: "+_cookiePath)}_vbTracker.visitorInfo={start_time:null,page:null,pageWTparams:null,ip:null,appCodeName:null,appName:null,appVersion:null,language:null,platform:null,userAgent:null,screenWith:null,screenHeight:null,_ecommerceEnabled:null,_cmsType:null,_goalAmount:null,_account:null,_domain:null,_action:null,__ukey:null,_sessionId:null,_uniqueTime:null,_referrerUrl:null,vbtTrack:null,ssId:null,vbtEmail:null,vbtListId:null,subscriberInfo:null,goalsEnabled:isGoalEnabled,webhooksEnabled:isWebhookEnabled,_vbtFlags:{},initialize:function(){this._account=_vbsetData.account,this._domain=_vbsetData.domain,this._action="pageview",empty(_vbsetData.ecommerce)?this._ecommerceEnabled="disabled":this._ecommerceEnabled=_vbsetData.ecommerce,empty(_vbsetData.type)||(this._cmsType=_vbsetData.type),empty(_vbsetData.amount)||(this._goalAmount=_vbsetData.amount),this.page=window.location.href,this.pageWTparams=window.location.href.split("?")[0],this.ip=visitorIP;var vbtEmail=vbt_getCookie("__vbset__email"),regex;vbtEmail&&(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(this.vbtEmail)?this.vbtEmail=vbtEmail:/^([a-zA-Z0-9_-]+)$/.test(vbtEmail)&&($vbtJQ("#"+vbtEmail).length>0?(console.log("_executeRegisterToThisList by ID triggered!"),_executeRegisterToThisList(vbtEmail,"id")):$vbtJQ("[name="+vbtEmail+"]").length>0&&(console.log("_executeRegisterToThisList by NAME triggered!"),_executeRegisterToThisList(vbtEmail,"name"))));this.vbtListId=vbt_getCookie("__vbset__list")||null,this.subscriberInfo="";var arrOfObjects=[],trk,trkCookie;_vbset.forEach((function(vbvar){"__vbvar__"==vbvar[0]&&"_listID"!=vbvar[1][0]&&"_email"!=vbvar[1][0]&&arrOfObjects.push("SubscriberForm["+vbvar[1][0]+"]="+vbvar[1][1])})),this.subscriberInfo=arrOfObjects.join("&"),this.start_time=new Date,this.country=country,this.state=state,this.city=city,this.isp=isp,this.organization=organization,this.appCodeName=navigator.appCodeName,this.appName=navigator.appName,this.appVersion=navigator.appVersion,"string"==navigator.userLanguage?this.language=navigator.userLanguage:"string"==navigator.language?this.language=navigator.language:this.language="(Not supported)",this._referrerUrl=document.referrer,this.platform=navigator.platform,this.userAgent=navigator.userAgent,window.screen?(this.screenWith=screen.width,this.screenHeight=screen.height):(this.screenWith=0,this.screenHeight=0),this._uniqueTime=_uniqueTime,(trk=vbt_getValueFromURL(location.href,"__vbtrk"))?vbt_setCookie("__vbtrk",trk=trk.replace(/\+/g," "),168):(trk=vbt_getValueFromURL(location.href,"_uax"))?vbt_setCookie("_uax",trk=trk.replace(/\+/g," "),168):(trkCookie=!0,trk=vbt_getCookie("__vbtrk")),this.vbtTrack=trk||"";var __ssId=vbt_getCookie("__ssId");if(__ssId)this.ssId=__ssId,vbt_GetSubscriberInfo(!trkCookie),console.log("Subscriber ID Y:"+__ssId);else{if(this.ssId=0,this.vbtTrack){var extractSubscriberId=Base64.decode(this.vbtTrack);extractSubscriberId=extractSubscriberId.split(":")[1],this.ssId=extractSubscriberId,vbt_setCookie("__ssId",this.ssId,168),vbt_GetSubscriberInfo(!0)}else track_contact_id&&track_contact_id>0&&(this.ssId=track_contact_id,vbt_setCookie("__ssId",this.ssId,168),vbt_GetSubscriberInfo(!0));console.log("Subscriber ID N:"+__ssId)}this._sessionId=vbt_getCookie("__vbsess"),this._sessionId||(this._sessionId=_vbSessionId,vbt_setCookie("__vbsess",this._sessionId,168));var vbupage=vbt_getCookie("__vbupage")||"";_uniquePagesTracking=empty(vbupage)?[]:vbupage.split(","),this.__ukey=this.getUniqueKey(),isMappingFlagEnabled?vbt_showMappingTools():(vbt_loadStyle("https://app.vbout.com/css/vbtracker.min.css?v=1.0.5"),vbt_loadStyle("https://app.vbout.com/trackerjs/tracker-compressed-nofancybox.css"),isHeatmapEnabled&&vbt_execHeatmap(this.ip,this.country),isWebhookEnabled&&this._buildWebhooks(),isGoalEnabled&&this._buildGoals())},process:function(page,source){if(!isMappingFlagEnabled){page&&(this.page=page,this.pageWTparams=page.split("?")[0]),void 0===page&&null===page||(this.__ukey=this.getUniqueKey()),null!=source&&(this._referrerUrl=source);var trkPage=this.page.toLowerCase();trkPage=(trkPage=trkPage.replace(/\&?\_\_vbtrk\=[a-zA-Z0-9\=]+/,"")).replace(/\&?\_uax\=[a-zA-Z0-9\=]+/,""),_uniquePagesTracking.length>5&&(vbt_deleteCookie("__vbupage"),_uniquePagesTracking=[]),-1==_uniquePagesTracking.indexOf(trkPage)&&(_uniquePagesTracking.push(trkPage),vbt_setCookie("__vbupage",_uniquePagesTracking.join(","),168)),this.visitorProcessTracker()}},execTracker:function(){isWebhookEnabled&&this._execPageWebhooks(),isGoalEnabled&&(this._execGoalsPPC(),this._execGoalsDestination(),this._execGoalsDuration(),this._execGoalsPageVisits(),this._execGoalsFunnels()),isLinkMappingEnabled&&this._attachGoalEventsLinkClicks(),isVideoMappingEnabled&&this._attachGoalEventsVideoPlays(),isFormMappingEnabled&&this._attachGoalEventsFormSubmitted()},getUniqueKey:function(){var obj=this,parts=[];for(var i in obj)obj.hasOwnProperty(i)&&"__ukey"!=i&&parts.push(encodeURIComponent(obj[i]));return Base64.encode(parts.join("&"))},toQueryString:function(){var obj=this,parts=[];for(var i in obj)obj.hasOwnProperty(i)&&parts.push(encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return parts.join("&")},visitorProcessTracker:function(_action,opts){var asyncArg=!opts||!1!==opts.asyncArg,query=opts&&opts.query?opts.query:this.toQueryString(),xmlhttp;xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var url=vbt_baseURL+"tracker/process?"+query;xmlhttp.open("GET",url,asyncArg),xmlhttp.send(null)}},isWebhookEnabled&&(_vbTracker.visitorInfo._actionsGoals=actionsGoals,_vbTracker.visitorInfo._actionsEntry=actionsEntry,_vbTracker.visitorInfo._actionsExit=actionsExit,_vbTracker.visitorInfo._actionsMiddle=actionsMiddle,_vbTracker.visitorInfo._actionsEnd=actionsEnd,_vbTracker.visitorInfo._buildWebhooks=function(){if(!this._vbtFlags._buildWebhooks){this._vbtFlags._buildWebhooks=!0;var cssFiles=[],_loadCssFile=function(popStyle,popTheme,messageId){var path,webhookPopup=vbt_baseURL+"trackerjs/webhook/popup.css";if(0==popStyle)if("MyPopup_action_"==messageId.substring(0,15))if(messageId.replace(/[^_]/g,"").length>2){var messageId2=messageId.substring(0,15)+messageId.split("MyPopup_action_")[1].split("_")[0]+messageId.split("MyPopup_action_")[1].split("_")[1];path=vbt_baseURL+"tracker/themes/popup/"+popTheme+"/"+messageId2.split("MyPopup_action_")[1].split("_")[0]+"/"}else path=vbt_baseURL+"tracker/themes/popup/"+popTheme+"/"+messageId.split("MyPopup_action_")[1]+"/";else path=vbt_baseURL+"tracker/goal/themes/popup/"+popTheme+"/"+messageId.split("MyPopup_")[1]+"/";else 2==popStyle&&(path="MyPopup_action_"==messageId.substring(0,15)?messageId.replace(/[^_]/g,"").length>2?vbt_baseURL+"tracker/themes/optinbars/"+popTheme+"/"+messageId.split("MyPopup_action_")[1].split("_")[0]+messageId.split("MyPopup_action_")[1].split("_")[1]+"/":vbt_baseURL+"tracker/themes/optinbars/"+popTheme+"/"+messageId.split("MyPopup_action_")[1]+"/":vbt_baseURL+"tracker/goal/themes/optinbars/"+popTheme+"/"+messageId.split("MyPopup_")[1]+"/");webhookPopup&&-1===cssFiles.indexOf(webhookPopup)&&(cssFiles.push(webhookPopup),vbt_loadStyle(webhookPopup)),path&&-1===cssFiles.indexOf(path)&&(cssFiles.push(path),vbt_loadStyle(path+"?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain+"&v="+_uniqueTime))},_buildWebhook=function(webhooks){var attr,popup,form,newPopupVersion;if(void 0!==webhooks&&0!=webhooks.length)for(var i in webhooks){if(attrs=webhooks[i].attrs,popup=null,form=null,newPopupVersion=null,_actionsBank[i]=attrs,1==attrs.type)for(var x in popup=vbt_createElement("div",document.body,attrs.messageHTML,{id:"vb_message_action_"+attrs.objId,"data-goalid":attrs.goalId,"data-actionid":attrs.actionId,style:"display: none;"}),(newPopupVersion=$vbtJQ(".vbtPopupThemeWrapper",popup).get(0))||$vbtJQ(popup).find(".essb_item a").each((function(){this.href=this.href.replace("[PAGE_URL]",encodeURIComponent(document.URL)),this.href=this.href.replace("[PAGE_TITLE]",encodeURIComponent(document.title))})),_loadCssFile(attrs.popStyle,attrs.popTheme,attrs.messageId),attrs.variations){var popup=vbt_createElement("div",document.body,attrs.variations[x].messageHTML,{id:"vb_message_action_"+attrs.objId+"_"+attrs.variations[x].objId,"data-varid":attrs.variations[x].objId,"data-goalid":attrs.goalId,"data-actionid":attrs.actionId,style:"display: none;"});newPopupVersion||$vbtJQ(popup).find(".essb_item a").each((function(){this.href=this.href.replace("[PAGE_URL]",encodeURIComponent(document.URL)),this.href=this.href.replace("[PAGE_TITLE]",encodeURIComponent(document.title))})),_loadCssFile(attrs.variations[x].popStyle,attrs.variations[x].popTheme,attrs.variations[x].messageId)}else if(2==attrs.type){if(form=(popup=vbt_createElement("div",document.body,attrs.messageHTML,{id:"vb_newsletter_action_"+attrs.objId,"data-goalid":attrs.goalId,"data-actionid":attrs.actionId,style:"display: none;"})).getElementsByTagName("form")[0],newPopupVersion=$vbtJQ(".vbtPopupThemeWrapper",popup).get(0),$vbtJQ("#"+attrs.messageId).addClass("vbtFormToCatch"),$vbtJQ(form).append('<input type="hidden" name="SubscriptionForm[appid]" value="ACTION_TRACKER" />'),$vbtJQ(form).append('<input type="hidden" name="SubscriptionForm[time]" value="'+_uniqueTime+'" />'),$vbtJQ(form).append('<input type="hidden" name="SubscriptionForm[sessionId]" value="" />'),void 0!==form){var middleForm=form.getElementsByTagName("div")[0]||form,embeddedFields=middleForm.querySelectorAll("input"),middleField=document.createElement("input");if(middleField.dataset.vboutpopup="modal-field",middleField.dataset.placeholder="Middle Name",middleField.type="hidden",middleField.name="SubscriptionForm[field][0]",middleField.id="custom-0",middleField.className="vbf-text",middleField.tabIndex=-1,embeddedFields.length>0){var embeddedFieldsCount=embeddedFields.length-1;if(newPopupVersion)var fieldRow=embeddedFields[0];else var fieldRow=embeddedFields[Math.floor(Math.random()*embeddedFields.length)];fieldRow.parentNode.insertBefore(middleField,fieldRow)}else middleForm.appendChild(middleField)}for(var x in newPopupVersion||($vbtJQ("label",form).each((function(){$vbtJQ(this).attr("for",$vbtJQ(this).prev().attr("id"))})),$vbtJQ(popup).find(".essb_item a").each((function(){this.href=this.href.replace("[PAGE_URL]",encodeURIComponent(document.URL)),this.href=this.href.replace("[PAGE_TITLE]",encodeURIComponent(document.title))}))),_loadCssFile(attrs.popStyle,attrs.popTheme,attrs.messageId),attrs.variations){var popup,form=(popup=vbt_createElement("div",document.body,attrs.variations[x].messageHTML,{id:"vb_newsletter_action_"+attrs.objId+"_"+attrs.variations[x].objId,"data-varid":attrs.variations[x].objId,"data-goalid":attrs.goalId,"data-actionid":attrs.actionId,style:"display: none;"})).getElementsByTagName("form")[0];$vbtJQ(form).append('<input type="hidden" name="SubscriptionForm[appid]" value="ACTION_TRACKER" />'),$vbtJQ(form).append('<input type="hidden" name="SubscriptionForm[time]" value="'+_uniqueTime+'" />'),$vbtJQ(form).append('<input type="hidden" name="SubscriptionForm[sessionId]" value="" />'),newPopupVersion||($vbtJQ("label",form).each((function(){$vbtJQ(this).attr("for",$vbtJQ(this).prev().attr("id"))})),$vbtJQ(popup).find(".essb_item a").each((function(){this.href=this.href.replace("[PAGE_URL]",encodeURIComponent(document.URL)),this.href=this.href.replace("[PAGE_TITLE]",encodeURIComponent(document.title))}))),_loadCssFile(attrs.variations[x].popStyle,attrs.variations[x].popTheme,attrs.variations[x].messageId)}}else 3==attrs.type&&(form=(popup=vbt_createElement("div",document.body,attrs.messageHTML,{id:"vb_poll_action_"+attrs.objId,"data-goalid":attrs.goalId,"data-actionid":attrs.actionId,style:"display: none;"})).getElementsByTagName("form")[0],newPopupVersion=$vbtJQ(".vbtPopupThemeWrapper",popup).get(0),$vbtJQ(form).append('<input type="hidden" name="PollForm[appid]" value="ACTION_TRACKER" />'),$vbtJQ(form).append('<input type="hidden" name="PollForm[time]" value="'+_uniqueTime+'" />'),$vbtJQ(form).append('<input type="hidden" name="PollForm[sessionId]" value="" />'),newPopupVersion||($vbtJQ("label",form).each((function(){$vbtJQ(this).attr("for",$vbtJQ(this).prev().attr("id"))})),$vbtJQ(popup).find(".essb_item a").each((function(){this.href=this.href.replace("[PAGE_URL]",encodeURIComponent(document.URL)),this.href=this.href.replace("[PAGE_TITLE]",encodeURIComponent(document.title))}))),_loadCssFile(attrs.popStyle,attrs.popTheme,attrs.messageId));if(popup&&newPopupVersion&&vBrandingWebhook){var branding='<div style="text-align: right;padding: 10px;">'+vBrandingWebhook+"</div>";$vbtJQ(newPopupVersion).append(branding)}delete attrs.messageHTML}};_buildWebhook(this._actionsEntry),_buildWebhook(this._actionsExit),_buildWebhook(this._actionsMiddle),_buildWebhook(this._actionsEnd),_buildWebhook(this._actionsGoals)}},_vbTracker.visitorInfo._execPageWebhooks=function(){if(!this._vbtFlags._execPageWebhooks){this._vbtFlags._execPageWebhooks=!0;var page=this.page,_execWebhook=function(webhooks,callback){var url,webhook;for(var i in webhooks)if(webhook=webhooks[i],vbt_matchUrls(page,webhook.urls,!0)){var attrs=webhook.attrs,cookie="__vbAction_"+attrs.actionId+"_"+visitor._sessionId,triggerCounter=vbt_getCookie(cookie);isNaN(triggerCounter)&&(triggerCounter=0),vbt_setCookie(cookie,++triggerCounter,168),callback(attrs)}};if(_execWebhook(this._actionsEntry,(function(attrs){__checkForValidPersona(attrs)&&(actionAlreadySent=!0,visitorTrackInfo.trackPageEntryAction(attrs.objId),_execActionToObject(attrs,""),actionAlreadySent=!1)})),_execWebhook(this._actionsExit,(function(attrs){__checkForValidPersona(attrs)&&(actionAlreadySent=!0,vbt_attachEvent(window,"mouseout",(function(evt){evt.pageY-$vbtJQ(window).scrollTop()<=1&&-1===_actionExitExec.indexOf(attrs.actionId)&&(_actionExitExec.push(attrs.actionId),console.log("exec..."),_execActionToObject(attrs,""),visitorTrackInfo.trackPageExitAction(attrs.objId))}),!1),actionAlreadySent=!1)})),_execWebhook(this._actionsMiddle,(function(attrs){__checkForValidPersona(attrs)&&_actionMiddleQueue.push(attrs)})),_execWebhook(this._actionsEnd,(function(attrs){__checkForValidPersona(attrs)&&_actionEndQueue.push(attrs)})),_actionMiddleQueue.length||_actionEndQueue.length){var _activeScrollQueue=0,_activeScrollFunction=function(){if(2!=_activeScrollQueue){_activeScrollQueue=2;var height=document.body.offsetHeight>document.body.scrollHeight?document.body.offsetHeight:document.body.scrollHeight;if(window.scrollY+window.innerHeight/2>.4*height&&_actionMiddleQueue.length&&(_actionMiddleQueue.forEach((function(attrs){_execActionToObject(attrs,""),visitorTrackInfo.trackPageExitAction(attrs.objId)})),_actionMiddleQueue=[]),window.scrollY+window.innerHeight>.9*height&&_actionEndQueue.length&&(_actionEndQueue.forEach((function(attrs){_execActionToObject(attrs,""),visitorTrackInfo.trackPageExitAction(attrs.objId)})),_actionEndQueue=[]),2!=_activeScrollQueue)return _activeScrollFunction();_activeScrollQueue=0}else _activeScrollQueue=1};vbt_attachEvent(window,"scroll",(function(evt){_activeScrollFunction()}),!1)}}}),isGoalEnabled&&(_vbTracker.visitorInfo._goals=goals,_vbTracker.visitorInfo._getFunnelWebhook=function(funnelId){return!!(this.webhooksEnabled&&"funnel"+funnelId in this._actionsGoals)&&this._actionsGoals["funnel"+funnelId].attrs},_vbTracker.visitorInfo._buildGoals=function(){var goals=this._goals.funnel;if(goals)for(var i in goals)for(var x in goals[i].pages)$vbtJQ("body").append('<div id="vb_funnel_message_'+goals[i].pages[x].funnelId+'" class="vbMessage" data-funnelid="'+goals[i].pages[x].funnelId+'" style="display: none;"></div>')},_vbTracker.visitorInfo._execGoalWebhook=function(goal,opts){"object"!=typeof opts&&(opts={});var cookie="__vbGoal_"+goal.id,triggerCounter=vbt_getCookie(cookie);if(isNaN(triggerCounter)&&(triggerCounter=0),vbt_setCookie(cookie,++triggerCounter,168),this.webhooksEnabled&&"goal"+goal.id in this._actionsGoals){var attrs=this._actionsGoals["goal"+goal.id].attrs;if(attrs._target=opts.target||null,__checkForValidPersona(attrs))return _execActionToObject(attrs,opts.callback||""),!0}},_vbTracker.visitorInfo._execGoalsDestination=function(){var goals=this._goals.destination;if(goals){var page=this.page;for(var i in goals){var goal=goals[i];vbt_matchUrls(page,goal.urls,!0)&&this._execGoalWebhook(goal)}}},_vbTracker.visitorInfo._execGoalsPPC=function(){var goals=this._goals.PPC;if(goals){var attrs,utm_source=vbt_getValueFromURL(location.href,"utm_source");if(!utm_source&&vbt_getValueFromURL(location.href,"gclid")&&(utm_source="google"),utm_source)for(var i=0,len=goals.length;i<len;i++)-1!=goals[i].PPC.indexOf(utm_source)&&this._execGoalWebhook(goals[i])}},_vbTracker.visitorInfo._execGoalsDuration=function(){var goals=this._goals.duration;if(goals)for(var that=this,i=0,len=goals.length;i<len;i++){var goal=goals[i];setTimeout((function(){that._execGoalWebhook(goal)}),1e3*goal.duration)}},_vbTracker.visitorInfo._execGoalsPageVisits=function(){var goals=this._goals.pages;if(goals)for(var pages=_uniquePagesTracking.length,i=0,len=goals.length;i<len;i++){var goal=goals[i];triggerCounter=vbt_getCookie("__vbGoal_"+goal.id)||0,goal.pages!=pages||triggerCounter||this._execGoalWebhook(goal)}},_vbTracker.visitorInfo._execGoalsFunnels=function(page){var goals=this._goals.funnel;if(goals)for(var i=0,len=goals.length;i<len;i++)console.log("FunnelID "+goals[i].id+" has been started..."),this._trackFunnelGoal(goals[i],page)},_vbTracker.visitorInfo._trackFunnelGoal=function(goal,page){var vbCurrentFunnel=goal,vbFunnel=vbt_getCookie("__vbFunnel_"+goal.id)||"",vbFunnelObj=empty(vbFunnel)?[]:vbFunnel.split(","),match=!1,page,curFunnelPage=vbt_matchUrls(page=page||document.URL,vbCurrentFunnel.pages,!1);if(curFunnelPage){console.log("Funnel Step: We have a match");var funnelId=curFunnelPage.funnelId,triggerAction;if(-1==vbFunnelObj.indexOf(page)&&(vbFunnelObj.push(page),console.log("Funnel Step: Add page to funnel list"),vbt_setCookie("__vbFunnel_"+goal.id,vbFunnelObj.join(","),5)),"1"==curFunnelPage.hasAddAction){var exists=!1,execute=!0,addActionObj=vbt_getCookie("__vbFunnelAddAction")||"",reset,ssId;if(empty(addActionObj)?addActionObj=this._getFunnelWebhook(funnelId)||{}:(addActionObj=JSON.parse(addActionObj),$vbtJQ.isEmptyObject(addActionObj)?addActionObj=this._getFunnelWebhook(funnelId)||{}:(exists=!0,execute=parseInt(addActionObj.order)<parseInt(curFunnelPage.order))),execute)if("1"==curFunnelPage.hasWebhookAction&&"function"==typeof _execActionToObject&&_execActionToObject(addActionObj,""),"1"==curFunnelPage.hasEmailAction&&(console.log("send email too if subscriber"),_execSendEmailToSubscriber(curFunnelPage)),"1"==curFunnelPage.hasAnonymousAction&&(console.log("send email too if anonymous"),_execSendEmailToAnonymous(curFunnelPage)),vbt_getCookie("__reset"))_execResetAnyAnonymousEmail(funnelId,vbt_getCookie("__ssId"))}vbFunnelObj.length==vbCurrentFunnel.pages.length&&this._execGoalWebhook(goal,{})}}),isLinkMappingEnabled&&(_vbTracker.visitorInfo._closestVbtTrack=function(el,data){if("A"==el.tagName||null!==el.getAttribute(data))return el;for(;!el.parentNode||!el.parentNode.getAttribute||"A"!=el.parentNode.tagName&&null===el.parentNode.getAttribute(data);)if(!(el=el.parentNode))return null;return el.parentNode},_vbTracker.visitorInfo._attachGoalEventsLinkClicks=function(){var that=this;vbt_attachEvent(document,"click",(function(evt){var vbtTrack="data-vbtTrack",redirect=!0,link=that._closestVbtTrack(evt.target,vbtTrack);if(link){if("A"==link.tagName)var href=(link.getAttribute("href")||"").toLowerCase();else{var href=(link.getAttribute(vbtTrack)||"").toLowerCase();redirect=!1}if(0===href.indexOf("http://")||0===href.indexOf("https://")||0===href.indexOf("/")){var isImage=-1!=["jpg","jpeg","png","gif"].indexOf(href.split("?")[0].split(".").pop().toLowerCase());if(!link.classList.contains("fancybox")&&!isImage&&(visitorTrackInfo.trackLinkClick(link,evt,href,redirect),redirect))return!1}}}),!1)}),isVideoMappingEnabled&&(_vbTracker.visitorInfo._attachGoalEventsVideoPlays=function(){for(var _buildVideoBox=function(iframe,opts){var iframeWidth=parseInt(iframe.offsetWidth),iframeHeight=parseInt(iframe.offsetHeight),iframeTop,ifromLeft;iframeTop=parseInt(iframe.offsetTop)+"px",ifromLeft=parseInt(iframe.offsetLeft)+"px",iframeWidth=iframeWidth?iframeWidth+"px":"100%",iframeHeight=iframeHeight?iframeHeight+"px":"100%";var overlay=document.createElement("div"),play=document.createElement("div");overlay.setAttribute("style","width: "+iframeWidth+"; height: "+iframeHeight+";"+opts.overlay),overlay.setAttribute("class","default"),"function"==typeof opts.screenshot?opts.screenshot(overlay):overlay.style.backgroundImage="url('"+opts.screenshot+"') ",play.setAttribute("style",opts.play),play.onmouseover=function(){this.style.opacity="1"},play.onmouseout=function(){this.style.opacity="0.7"},overlay.appendChild(play),overlay.onmouseover=function(){this.setAttribute("class","fadeIn")},overlay.onmouseout=function(){this.setAttribute("class","default")};var videoUrl=iframe.getAttribute("src"),eStyle=iframe.currentStyle||window.getComputedStyle(iframe);if(overlay.style.margin=eStyle.margin,overlay.style.top=eStyle.top,overlay.style.left=eStyle.left,overlay.style.right=eStyle.right,overlay.style.bottom=eStyle.bottom,"inline"!=eStyle.display&&(overlay.style.display=eStyle.display),!$vbtJQ(iframe).parents(".et_pb_video_box").length){$vbtJQ(overlay).parent(".fluid-width-video-wrapper").length&&(overlay.setAttribute("data-oldpadding",$vbtJQ(overlay).parent(".fluid-width-video-wrapper").css("paddingTop")),$vbtJQ(overlay).parent(".fluid-width-video-wrapper").css("padding",0));var iframeClone=iframe.cloneNode(!0);iframe.parentNode.replaceChild(overlay,iframe),overlay.onclick=function(){var overlay=this;visitorTrackInfo.trackVideoClick(videoUrl,opts.videoId,(function(){$vbtJQ(overlay).parent(".fluid-width-video-wrapper").length&&$vbtJQ(overlay).parent(".fluid-width-video-wrapper").css("paddingTop",overlay.getAttribute("data-oldpadding")),videoUrl=vbt_removeFromURL(videoUrl,"rel|autoplay"),iframeClone.setAttribute("src",videoUrl+(videoUrl.indexOf("?")>0?"&":"?")+"rel=0&autoplay=true"),overlay.parentNode.replaceChild(iframeClone,overlay),$vbtJQ("body").css("overflow","auto"),$vbtJQ("body").find(".fancybox-overlay").length&&setTimeout((function(){nowYSMnowYDT(iframeClone)}),1e3)}))}}},ytUrl=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=))([\w-]+)/,vmUrl=/^https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:video\/)?(\d+)($|\/)/,iframes=document.getElementsByTagName("iframe"),len,i=iframes.length-1;i>=0;i--){var iframe=iframes[i],src=iframe.getAttribute("src")||"";if(src)if(ytUrl.test(src)){var video;(video=src.match(ytUrl))[1]=video[1].replace(/\//g,"");var screenshot="//img.youtube.com/vi/"+video[1]+"/0.jpg";_buildVideoBox(iframe,{videoId:video[1],videoType:"youtube",overlay:"display:block;cursor: pointer; position: relative; background: #000 no-repeat center center;background-size:cover;",play:'width: 64px; height: 64px; margin: auto; position: absolute; top: 0; left: 0; bottom: 0; right: 0; background:rgba(0, 0, 0, 0) url("https://app.vbout.com/images/youtubethumb.png") no-repeat scroll 0 0;opacity:0.7;',screenshot:screenshot})}else if(vmUrl.test(src)){var video;_buildVideoBox(iframe,{videoId:(video=src.match(vmUrl))[1],videoType:"vimeo",overlay:"display:block;cursor: pointer; position: relative; background: #000 no-repeat center center;background-size:cover;",play:'width: 64px; height: 64px; margin: auto; position: absolute; top: 0; left: 0; bottom: 0; right: 0; background:rgba(86, 84, 84, 0.44) url("https://app.vbout.com/images/play-video.png") no-repeat scroll 0 0;opacity:0.7; border-radius: 50%;',screenshot:function(overlay){var data_file;vbt_getAjax("https://vimeo.com/api/v2/video/"+video[1]+".json",(function(){if(4==this.readyState){var vimeoParsedResponse=tryParseJSON(this.responseText);if(vimeoParsedResponse){var screenshot=vimeoParsedResponse[0].thumbnail_large;overlay.style.display="block",overlay.style.backgroundImage="url('"+screenshot+"') "}else{var screenshot="https://app.vbout.com/public-ups/vimeo-default-empy.jpg";overlay.style.display="block",overlay.style.backgroundImage="url('"+screenshot+"') "}}}))}})}}}),isFormMappingEnabled&&(_vbTracker.visitorInfo._attachGoalEventsFormSubmitted=function(){var goalForms=[],trackFormSubmit={name:[],id:[]},goals=this._goals.events;if(goals)for(var i=0,len=goals.length;i<len;i++)"submit-forms"==goals[i].eventsType&&(goalForms.push(goals[i]),1==goals[i].formid?trackFormSubmit.name.push(goals[i].formidentity.toLowerCase()):trackFormSubmit.id.push(goals[i].formidentity.toLowerCase()));vbt_attachEvent(document,"submit",(function(evt){var form=evt.target;if("FORM"==form.tagName){var id=(form.getAttribute("id")||"~~").toLowerCase(),name=(form.getAttribute("name")||"~~").toLowerCase();(trackFormSubmit.id.indexOf(id)>-1||trackFormSubmit.name.indexOf(name)>-1)&&visitorTrackInfo.trackFormSubmit(id,name,Base64.encode(serialize(form)),form)}}),!0);var formsInterval=setInterval((function(){for(var forms=document.getElementsByTagName("form"),flen=forms.length,f=0;f<flen;f++)if(!forms[f]._vbTGEFS){var form=forms[f];form._vbTGEFS=!0;for(var id=(form.getAttribute("id")||"~~").toLowerCase(),name=(form.getAttribute("name")||"~~").toLowerCase(),i=0,len=goalForms.length;i<len;i++){var goal=goalForms[i];if((1!=goal.formid&&id==goal.formidentity||1==goal.formid&&name==goal.formidentity)&&goal.formidentitylist>0){_execSendFormEmailToAnonymous(id,name,form,goal.formidentitylist,goal.id);break}}}}),3e3)}),_vbTracker.triggerTracking=function(page,source){if(null!=visitor){var pageX=_vbsetData.domain.replace(/\/?$/,"/")+page.replace(/^\/?/,"").replace(/\/?$/,"/");if(void 0!==source){var sourceX=_vbsetData.domain.replace(/\/?$/,"/")+source.replace(/^\/?/,"").replace(/\/?$/,"/");visitor.process(pageX,sourceX)}else visitor.process(pageX);isGoalEnabled&&visitor._execGoalsFunnels(pageX)}else setTimeout((function(){_vbTracker.triggerTracking(page,source)}),1e3)},_vbTracker.trackEventsInfo={start_time:null,end_time:null,timeSpent:null,linkClicked:null,linkClickedId:null,linkUniqueId:null,linkFormId:null,linkFormName:null,linkFormInput:null,_ecommerceEnabled:null,_cmsType:null,_goalAmount:null,vbtTrack:null,ssId:null,actionId:null,variationId:null,_account:null,_domain:null,_action:null,__ukey:null,_sessionId:null,_uniqueTime:null,_referrerUrl:null,ip:null,vbtEmail:null,vbtListId:null,initialize:function(__ukey){this._account=_vbsetData.account,this._domain=_vbsetData.domain,this._action="tracktime",this.actionId=0,this.variationId=0,this.ip=visitorIP,empty(_vbsetData.ecommerce)?this._ecommerceEnabled="disabled":this._ecommerceEnabled=_vbsetData.ecommerce,empty(_vbsetData.type)||(this._cmsType=_vbsetData.type),empty(_vbsetData.amount)||(this._goalAmount=_vbsetData.amount);var vbtEmail=vbt_getCookie("__vbset__email"),regex,trk,trkCookie;vbtEmail&&(/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(this.vbtEmail)&&(this.vbtEmail=vbtEmail));this.vbtListId=vbt_getCookie("__vbset__list")||null,this.start_time=new Date,this.__ukey=__ukey,this._uniqueTime=_uniqueTime,this._referrerUrl=document.referrer,(trk=vbt_getValueFromURL(location.href,"__vbtrk"))?vbt_setCookie("__vbtrk",trk=trk.replace(/\+/g," "),168):trk?vbt_setCookie("_uax",trk=trk.replace(/\+/g," "),168):(trkCookie=!0,trk=vbt_getCookie("__vbtrk")),this.vbtTrack=trk||"";var __ssId=vbt_getCookie("__ssId");if(__ssId)this.ssId=__ssId,vbt_GetSubscriberInfo(!trkCookie);else if(this.ssId=0,this.vbtTrack&&!trkCookie){var extractSubscriberId=Base64.decode(this.vbtTrack);extractSubscriberId=extractSubscriberId.split(":")[1],this.ssId=extractSubscriberId,vbt_setCookie("__ssId",this.ssId,168),vbt_GetSubscriberInfo(!0)}this._sessionId=vbt_getCookie("__vbsess"),this._sessionId||(this._sessionId=_vbSessionId,vbt_setCookie("__vbsess",this._sessionId,168))},trackPageExitAction:function(actionId){this.actionId=actionId,this.trackEventsProcessTracker("trackpageexit")},updateActionVariation:function(actionId,variationId){this._action="updateaction",this.actionId=actionId,this.variationId=variationId,this.trackEventsProcessTracker("updateaction")},trackAction:function(actionId,variationId){this._action="trackaction",this.actionId=actionId,this.variationId=variationId,this.trackEventsProcessTracker("trackaction")},trackPageEntryAction:function(actionId){this.actionId=actionId,this.trackEventsProcessTracker("trackpageentry")},processTimeSpend:function(send){this._action="tracktime",this.end_time=new Date,this.timeSpent=this.end_time-this.start_time;var query=this.toQueryString();send?(query=vbt_getLocalStorage("__ts__"))&&(this.trackEventsProcessTracker("tracktime",{query:query}),vbt_deleteLocalStorage("__ts__")):vbt_setLocalStorage("__ts__",query)},toQueryString:function(){var obj=this,parts=[];for(var i in obj)obj.hasOwnProperty(i)&&parts.push(encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return parts.join("&")},trackEventsProcessTracker:function(_action,opts){this._action=_action;var asyncArg=!opts||!1!==opts.asyncArg,query=opts&&opts.query?opts.query:this.toQueryString(),xmlhttp;xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var url=vbt_baseURL+"tracker/process?"+query;xmlhttp.open("GET",url,asyncArg),xmlhttp.send(null)}},isLinkMappingEnabled&&(_vbTracker.trackEventsInfo.trackLinkClick=function(link,evt,href,redirect){this.linkClicked=href||"",this.linkClickedId=link.getAttribute("id")||"",this.trackEventsProcessTracker("tracklink");var callbackfunc,triggered=!1;!1!==redirect&&(callbackfunc=link.onclick,link.onclick=null);var openURL=function(){if(!1!==redirect){var target=evt.ctrlKey?"_blank":link.getAttribute("target")||"",url=link.getAttribute("data-href")||link.getAttribute("href")||"";url&&(evt.preventDefault(),evt.stopPropagation(),target?window.open(url,target):window.location=url)}},isPDF=function(link){var url,ext=(link.getAttribute("data-href")||link.getAttribute("href")||"").toLowerCase().split(".").pop();return"pdf"==ext||"com/vista-projects_digital-project-execution"==ext||"com/vista-projects_digital-project-execution/"==ext}(link),goals=visitor._goals.events;if(goals)for(var href=(href||"~~").toLowerCase(),id=(link.getAttribute("id")||"~~").toLowerCase(),i=0,len=goals.length;i<len;i++)if("click-links"==goals[i].eventsType&&(-1!=goals[i].links.indexOf(href)||-1!=goals[i].links.indexOf(id))){var goal=goals[i],matched=0===goal.linkrule;if(!matched){var validUniquePages=0;-1!=goals[i].links.indexOf(href)&&validUniquePages++;for(var x=0,xlen=_uniquePagesTracking.length;x<xlen;x++)href!=_uniquePagesTracking[x].toLowerCase()&&-1!=goals[i].links.indexOf(_uniquePagesTracking[x].toLowerCase())&&validUniquePages++;validUniquePages==goals[i].links.length&&(matched=!0)}matched&&!isPDF&&(triggered=visitor._execGoalWebhook(goal,{target:link,callback:function(){try{"function"==typeof callbackFunc&&callbackFunc()}catch(e){}openURL(),$vbtJQ("body").css("overflow","auto")}}));break}if(!0!==triggered){try{"function"==typeof callbackFunc&&callbackFunc()}catch(e){}openURL()}}),isVideoMappingEnabled&&(_vbTracker.trackEventsInfo.trackVideoClick=function(url,urlId,callbackFunc){this.linkClicked=url,this.linkUniqueId=urlId,this.trackEventsProcessTracker("trackvideo");var triggered=!1,goals=visitor._goals.events;if(goals)for(var i=0,len=goals.length;i<len;i++)if("watch-videos"==goals[i].eventsType){var matched=!1;if(-1!=goals[i].videos.indexOf(url));else{var ytUrl=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,vmUrl=/(http:|https:|)\/\/(player.)?(vimeo\.com)\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/;for(var x in goals[i].videos){var video,video;if((video=goals[i].videos[x].match(ytUrl))&&(video[1]||"").toLowerCase()==urlId.toLowerCase())break;if((video=goals[i].videos[x].match(vmUrl))&&(video[1]||"").toLowerCase()==urlId.toLowerCase())break}}0}if(!0!==triggered)try{"function"==typeof callbackFunc&&callbackFunc()}catch(e){}}),isFormMappingEnabled&&(_vbTracker.trackEventsInfo.trackFormSubmit=function(formId,formName,formInput,formObj){this._action="trackform",this.linkFormId=formId,this.linkFormName=formName,this.linkFormInput=formInput,this.trackEventsProcessTracker("trackform");var triggered=!1,goals=visitor._goals.events;if(goals)for(var id=(formObj.getAttribute("id")||"~~").toLowerCase(),name=(formObj.getAttribute("name")||"~~").toLowerCase(),i=0,len=goals.length;i<len;i++)if("submit-forms"==goals[i].eventsType){var goal=goals[i];if(1!=goal.formid&&id==goal.formidentity||1==goal.formid&&name==goal.formidentity){triggered=visitor._execGoalWebhook(goals[i],{target:goal.formidentity,callback:function(){$vbtJQ("body").css("overflow","auto")}});break}}});var librariesQueue={recaptcha:{jsLoad:"https://www.google.com/recaptcha/api.js?render=explicit"},flatpickr:{css1:vbt_baseURL+"ext/flatpickr.min.css",jsLoad:vbt_baseURL+"ext/flatpickr.min.js"},birthdayinput:{css1:vbt_baseURL+"ext/birthdayinput/birthdayinput.css?v=1.4",jsLoad:vbt_baseURL+"ext/birthdayinput/birthdayinput.js?v=1.4"},checkboxselectinput:{css1:vbt_baseURL+"ext/checkboxselectinput/checkboxselectinput.min.css?v=1.0.2",jsLoad:vbt_baseURL+"ext/checkboxselectinput/checkboxselectinput.min.js?v=1.0.2"}};function attachLibraries(name,callback){if(name in librariesQueue)if("queue"in librariesQueue[name])null==librariesQueue[name].queue?callback():librariesQueue[name].queue.push(callback);else for(var i in librariesQueue[name].queue=[],librariesQueue[name].queue.push(callback),librariesQueue[name]){var load="cssLoad"==i||"jsLoad"==i?function(){for(var element;element=librariesQueue[name].queue.shift();)element();librariesQueue[name].queue=null}:null;i.indexOf("css")>-1&&vbt_loadStyle(librariesQueue[name][i],load),i.indexOf("js")>-1&&vbt_loadJs(librariesQueue[name][i],load)}}function getFormFieldValues($,form){var data={listId:0,fields:{}},_form=form||document;return _vbset.forEach((function(vbvar){if("__vbvar__"==vbvar[0])if("_listID"==vbvar[1][0])data.listId=vbvar[1][1];else{var el=document.getElementById(vbvar[1][1]);el?data.fields[vbvar[1][0].substring(1)]=$vbtJQ(el,_form).val():$vbtJQ('[name="'+vbvar[1][1]+'"]',_form).each((function(){"INPUT"==this.tagName&&["radio","checkbox"].indexOf(this.type)>-1?this.checked&&(data.fields[vbvar[1][0].substring(1)]=$vbtJQ(this).val()):data.fields[vbvar[1][0].substring(1)]=$vbtJQ(this).val()}))}})),data}if(isWebhookEnabled){var intlTelQueue=[],intlTelLib=!1;function attachIntlTelPlugin(form){var tel;foreach(form,"input[type=tel]",(function(){tel=!0})),tel&&(window.intlTelInput?applyIntlTelPlugin(form):(intlTelQueue.push(form),intlTelLib||(intlTelLib=!0,vbt_loadStyle(vbt_baseURL+"ext/intl-tel-input/css/intlTelInput.min.css?v=1.1"),vbt_loadJs(vbt_baseURL+"ext/intl-tel-input/js/intlTelInput.min.js?v=1.1",(function(){for(var element;element=intlTelQueue.shift();)applyIntlTelPlugin(element)})))))}function applyIntlTelPlugin(form){if(!window.intlTelInput)return!1;foreach(form,"input[type=tel]",(function(){var input=this;if("yes"===this.getAttribute("data-countrylist")||null===this.getAttribute("data-countrylist")){var iti=window.intlTelInput(this,{utilsScript:vbt_baseURL+"ext/intl-tel-input/js/utils.js",initialCountry:"auto",geoIpLookup:function(success,failure){vbtIpInfo.load((function(resp){var countryCode=resp&&resp.country?resp.country:"";success(countryCode)}))}});this.addEventListener("countrychange",(function(e){var dialCode=iti.getSelectedCountryData().dialCode;this._iti_country=dialCode||"",dialCode&&"+"!=this.value[0]&&(this.value="+"+dialCode+this.value)})),this.addEventListener("blur",(function(e){var number,number;(number=0==(number=String("+"==this.value[0]?this.value.substring(1):this.value)).indexOf("00")?number.substring(2):number)||(number=iti.getSelectedCountryData().dialCode),this.value="+"+number,fireEvent(this,"keyup")}))}}))}function attachRecaptcha(form,reset){var recaptchaField;if(form.getElementsByClassName("recaptchaField")[0])return attachLibraries("recaptcha",(function(){var ready=setInterval((function(){if(window.grecaptcha&&window.grecaptcha.render){clearInterval(ready);var field=form.getElementsByClassName("recaptchaField")[0];if(field&&field.parentNode){var sitekey="6LfCul4UAAAAAGcc72HZeEZi2W7ABVGtXLesujj_";"_vbtCaptcha"in field?!0===reset&&grecaptcha.reset(field._vbtCaptcha):field._vbtCaptcha=grecaptcha.render(field,{sitekey:sitekey,"expired-callback":function(){setTimeout((function(){grecaptcha.reset(field._vbtCaptcha)}),125)},theme:"light"})}}}),500)}))}function attachFlatPickr(form){for(var inputs=form.getElementsByClassName("date-picker"),i=0,len=inputs.length;i<len;i++)if("INPUT"==inputs[i].tagName)return attachLibraries("flatpickr",(function(){for(var inputs=form.getElementsByClassName("date-picker"),i=0,len=inputs.length;i<len;i++)"INPUT"==inputs[i].tagName&&inputs[i].parentNode&&window.flatpickr(inputs[i],{dateFormat:inputs[i].getAttribute("data-format")||"Y-m-d"})}))}function attachBirthdayPicker(form){var exist=!1;if(foreach(form,".vfb-birthday, .birthday-picker",(function(){var input=this;"INPUT"==this.tagName&&this.parentNode&&(exist=!0)})),exist)return attachLibraries("birthdayinput",(function(){foreach(form,".vfb-birthday, .birthday-picker",(function(){var input=this;if("INPUT"==this.tagName&&this.parentNode){var opts={};hasClass(this,"birthday-picker")&&(opts.dateFormat=this.getAttribute("data-format")||"d-m"),window.birthdayInput(this)}}))}))}function attachCheckboxSelectStyler(form){if(ifElement(form,"div.vfb-checkbox-select"))return attachLibraries("checkboxselectinput",(function(){foreach(form,"div.vfb-checkbox-select",(function(){window.checkboxSelectInput(this,{})}))}))}function attachRegionsSelectBoxes(form){var countries=form.getElementsByClassName("vfb-select-countries")[0];if(countries&&"SELECT"==countries.tagName){attachRegionsSelectBox(countries),getRegionsList(null,countries,{source:"Countries",pleaseSelect:__("-- Please Select --"),onChangeMessage:__("Loading Countries. Please wait..."),onLoad:function(){smartCountriesField(form,countries)}});var states=form.getElementsByClassName("vfb-select-states")[0];if(states&&"SELECT"==states.tagName){attachRegionsSelectBox(states),attachRegionsSelectBoxesEvent(countries,states,{source:"States",pleaseSelect:__("-- Please Select --"),onChangeMessage:__("Loading States. Please wait...")});var cities=form.getElementsByClassName("vfb-select-cities")[0];cities&&"SELECT"==cities.tagName&&(attachRegionsSelectBox(cities),attachRegionsSelectBoxesEvent(states,cities,{source:"Cities",pleaseSelect:__("-- Please Select --"),onChangeMessage:__("Loading Cities. Please wait...")}))}}}function attachRegionsSelectBoxesEvent(source,destination,options){$vbtJQ(source).on("change ",(function(){var id;getRegionsList(this.options[this.selectedIndex].getAttribute("data-id")||0,destination,options)}))}function attachRegionsSelectBox(destination){try{$vbtJQ.fn.chosen&&$vbtJQ(destination).chosen()}catch(e){}}function getRegionsList(id,destination,options){if(destination.setAttribute("disabled","DISABLED"),destination.selectedIndex=0,0===id)return destination.innerHTML="",void $vbtJQ(destination).trigger("chosen:updated");destination.innerHTML='<option value="">'+options.onChangeMessage+"</option>",$vbtJQ(destination).trigger("change"),$vbtJQ(destination).trigger("chosen:updated");var action="https://www.vbt.io/Regions/"+options.source+"/"+id;$vbtJQ.getJSON(action,{},(function(response){var selected=(destination.getAttribute("data-selected")||"").toLowerCase();if("[object Array]"===Object.prototype.toString.call(response.data)){var option;destination.selectedIndex=0,destination.innerHTML='<option value="">'+options.pleaseSelect+"</option>";for(var i=0,len=response.data.length;i<len;i++)(option=document.createElement("option")).setAttribute("data-id",response.data[i][0]),option.setAttribute("value",response.data[i][1]),response.data[i][2]&&option.setAttribute("data-code",String(response.data[i][2]).toLowerCase()),option.innerHTML=response.data[i][1],selected&&option.innerHTML.toLowerCase()==selected&&(destination.selectedIndex=i+1,option.setAttribute("selected","SELECTED"),destination.removeAttribute("data-selected")),destination.appendChild(option);destination.removeAttribute("disabled"),$vbtJQ(destination).trigger("chosen:updated"),destination.selectedIndex>0&&$vbtJQ(destination).trigger("change"),"function"==typeof options.onLoad&&options.onLoad(destination)}}))}function attachRegionsAutoComplete(form){var countryInput=form.querySelector('input[data-validation="countries"]')||null,stateInput=form.querySelector('input[data-validation="states"]')||null,cityInput=form.querySelector('input[data-validation="cities"]')||null;if(countryInput){getAutocompleteData(countryInput,"countries",0),attachAutoComplete(countryInput),attachAutoComplete(stateInput),attachAutoComplete(cityInput),countryInput&&addEventsListener(countryInput,"input",(function(e){if(clearAutoCompleteLists(),!countryInput.value)return!1;getAutocompleteData(countryInput,"countries",0,(function(data){buildAutoCompleteList(countryInput,data,(function(id,name){stateInput&&(stateInput.setAttribute("data-countryid",id),getAutocompleteData(stateInput,"states",id))}))}))})),stateInput&&addEventsListener(stateInput,"input",(function(e){if(clearAutoCompleteLists(),!stateInput.value)return!1;var countryId=stateInput.getAttribute("data-countryid")||0;getAutocompleteData(stateInput,"states",countryId,(function(data){buildAutoCompleteList(stateInput,data,(function(id,name){cityInput&&(cityInput.setAttribute("data-stateid",id),getAutocompleteData(cityInput,"cities",id))}))}))})),cityInput&&addEventsListener(cityInput,"input",(function(e){if(clearAutoCompleteLists(),!cityInput.value)return!1;var stateId=cityInput.getAttribute("data-stateid")||0;getAutocompleteData(cityInput,"cities",stateId,(function(data){buildAutoCompleteList(cityInput,data,(function(id,name){}))}))})),autocompleteEvents.close||(autocompleteEvents.close=document.addEventListener("click",(function(e){clearAutoCompleteLists(e.target)}))),vbtIpInfo.load((function(resp){var countryCode=empty(resp.country)?"-":resp.country.toUpperCase(),countryName=empty(countriesList[countryCode])?"":countriesList[countryCode];countryInput&&empty(countryInput.value)&&!empty(countryName)&&(countryInput.setAttribute("value",countryName),countryInput.value=countryName,fireEvent(countryInput,"change",!0)),stateInput&&empty(stateInput.value)&&!empty(resp.region)&&(stateInput.setAttribute("value",resp.region),stateInput.value=resp.region,fireEvent(stateInput,"change",!0)),cityInput&&empty(cityInput.value)&&!empty(resp.city)&&(cityInput.setAttribute("value",resp.city),cityInput.value=resp.city,fireEvent(cityInput,"change",!0)),countryInput&&getAutocompleteData(countryInput,"countries",0,(function(countries){if(stateInput&&!empty(countryInput.value))for(var i in countries)if(countries[i][1]==countryInput.value)return stateInput.setAttribute("data-countryid",countries[i][0]),getAutocompleteData(stateInput,"states",countries[i][0],(function(states){if(cityInput&&!empty(stateInput.value))for(var i2 in states)if(states[i2][1]==stateInput.value)return cityInput.setAttribute("data-stateid",states[i2][0]),getAutocompleteData(stateInput,"cities",states[i2][0],(function(cities){}))}))}))}));var cssStyle="";cssStyle+=".vbt-autocomplete-wrapper {position: relative !important; top: 0 !important; left: 0 !important; right: 0 !important; width:100% !important;}",cssStyle+=".vbt-autocomplete-list {position: absolute !important; border: 1px solid #d4d4d4 !important; border-bottom: none !important; border-top: none !important; z-index: 999 !important; top: 100% !important; left: 0 !important; right: 0 !important; width:100%  !important; max-height: 170px !important; overflow: auto !important; box-shadow: 0px 0px 7px 3px #cbd6e2 !important;}",cssStyle+=".vbt-autocomplete-list .vbt-autocomplete-item {padding: 10px !important; cursor: pointer !important; background-color: #fff !important; border-bottom: 1px solid #d4d4d4 !important; }",cssStyle+=".vbt-autocomplete-list .vbt-autocomplete-item:hover {background-color: #e9e9e9 !important; }",cssStyle+=".vbt-autocomplete-list .vbt-autocomplete-item.vbt-autocomplete-item-active {background-color: DodgerBlue !important !important; color: #ffffff !important; }",$vbtJQ(form).append("<style>"+cssStyle+"</style>")}function attachAutoComplete(input){if(input)return addEventsListener(input,"keydown",(function(e){var list=this.parentNode.getElementsByClassName("vbt-autocomplete-list")[0];if(list){var active=list.getElementsByClassName("vbt-autocomplete-item-active")[0];if(40==e.keyCode){var next=active?active.nextSibling:list.firstChild;next&&(removeClass(active,"vbt-autocomplete-item-active"),addClass(next,"vbt-autocomplete-item-active"))}else if(38==e.keyCode){var previous=active?active.previousSibling:null;previous&&(removeClass(active,"vbt-autocomplete-item-active"),addClass(previous,"vbt-autocomplete-item-active"))}else 13==e.keyCode&&active&&(e.preventDefault(),active.click())}})),input}function clearAutoCompleteLists(target){foreach(document,".vbt-autocomplete-wrapper",(function(){target!=this&&this.parentNode.removeChild(this)}))}function buildAutoCompleteList(input,data,callback){var wrapper=document.createElement("div");wrapper.setAttribute("class","vbt-autocomplete-wrapper");var list=document.createElement("div");list.setAttribute("class","vbt-autocomplete-list"),wrapper.appendChild(list),input.parentNode.appendChild(wrapper);var value=(input.value||"").toUpperCase(),valueLength=value.length;return!empty(value)&&isArray(data)&&data.forEach((function(row){var id=row[0],name=row[1];if(0===name.toUpperCase().indexOf(value)){var item=document.createElement("div"),textX=name.substr(0,valueLength);item.innerHTML="<strong>"+textX+"</strong>",item.innerHTML+=name.substr(valueLength),item.setAttribute("class","vbt-autocomplete-item"),item.setAttribute("data-item-id",id),item.setAttribute("data-item-value",name),addEventsListener(item,"click",(function(e){input.value=this.getAttribute("data-item-value"),fireEvent(input,"change",!0),callback&&callback(this.getAttribute("data-item-id"),this.getAttribute("data-item-value")),clearAutoCompleteLists()})),list.appendChild(item)}})),list}function getAutocompleteData(input,type,parentId,callback){input._vbtaccode=parentId,type in autocompleteArray&&(autocompleteArray[type][parentId]||(autocompleteArray[type][parentId]=new dataLoader("https://www.vbt.io/Regions/"+type+"/"+parentId+"/",(function(response){return isArray(response.data)?response.data:[]}))),callback&&autocompleteArray[type][parentId].load(callback))}}function smartCountriesField(form,country){vbtIpInfo.load((function(resp){if(resp&&resp.country&&!country.value){var option=country.querySelector('option[data-code="'+String(resp.country).toLowerCase()+'"]');if(option){var state=form.getElementsByClassName("vfb-select-states")[0];if(state&&resp.region){state.setAttribute("data-selected",resp.region);var city=form.getElementsByClassName("vfb-select-cities")[0];city&&resp.city&&city.setAttribute("data-selected",resp.city)}option.setAttribute("selected","SELECTED"),$vbtJQ(country).trigger("chosen:updated"),$vbtJQ(country).trigger("change")}}}))}function formMultiSteps(form){var $formSteps,$formActiveStep,$formFirstStep,$formLastStep,$formStepBar,$formPreviousBtn,$formNextBtn,$formSubmitBtn,$formMultiStep;function activateSteps(resetSteps){$formSteps=$vbtJQ(".vbpfs-step",form).map((function(){var step=this,rows=$vbtJQ(".vbpfs-row",this).length,hidden=$vbtJQ(".vbpfs-row-dependent-hidden",this).length;return removeClass(this,"active"),hidden>=rows?null:this})).toArray(),($formMultiStep=$formSteps.length>1)?($formFirstStep=$formSteps[0],$formLastStep=$formSteps[$formSteps.length-1]):(resetSteps=!0,$formFirstStep=$formSteps[0],$formLastStep=$formSteps[0]),setActiveStep(resetSteps?$formFirstStep:$formActiveStep)}function targetSibling(element,act){var targetStep=null,found,prev=null,next="next"==act;return $formSteps.forEach((function(thisStep){if(!targetStep){if(found&&next)return void(targetStep=thisStep);if((found=thisStep==element)&&!next)return void(targetStep=prev);prev=thisStep}})),targetStep}function showStepButtons(currentStep){var nextStep=targetSibling(currentStep,"next"),prevStep=targetSibling(currentStep,"prev");nextStep?addClass($formNextBtn,"active"):removeClass($formNextBtn,"active"),prevStep?addClass($formPreviousBtn,"active"):removeClass($formPreviousBtn,"active"),nextStep?removeClass($formSubmitBtn,"active"):addClass($formSubmitBtn,"active")}function focusFirstField(targetStep){var fields=targetStep.querySelectorAll(["input[type=text]","input[type=email]","input[type=phone]","input[type=number]","input[type=tel]","input[type=date]","select","textarea"].join(",")),field=fields[0];if(field&&"SubscriptionForm[field][0]"==field.name&&(field=fields[1]),field){var autocomplete=field.getAttribute("autocomplete");field.setAttribute("autocomplete","off"),field.focus(),null!=autocomplete?field.setAttribute("autocomplete",autocomplete):field.removeAttribute("autocomplete")}}function changeStep(act){var targetStep;if("next"==act){if(!(targetStep=targetSibling($formActiveStep,"next")))return}else if(!(targetStep=targetSibling($formActiveStep,"prev")))return;setActiveStep(targetStep)}function buildStepsBar(currentStep){if($formStepBar){var style=hasClass($formStepBar,"vbpfs-steps-bar-dots")?"dots":"lines",progress;if(!$formStepBar.getElementsByClassName("vbpfs-stepbar-progress")[0]&&($formStepBar.innerHTML="",$formStepBar.innerHTML+='<div class="vbpfs-stepbar-progress"><div class="vbpfs-stepbar-progressbar" style="width: 0%;"></div></div>',$formStepBar.innerHTML+='<ul class="vbpfs-stepbar-dots"></ul>',"dots"==style)){var stepbarDots=$formStepBar.getElementsByClassName("vbpfs-stepbar-dots")[0];$formSteps.forEach((function(thisStep,i){var dot=createElement("li",{className:"vbpfs-stepbar-dot",html:i+1},stepbarDots)}))}var stepX=$formSteps.reduce((function(val,thisStep,i){return thisStep==currentStep?i:val}),5),width=(stepX+1)/$formSteps.length*100;"dots"==style&&(width=stepX>0?stepX/($formSteps.length-1)*100:0,foreach($formStepBar,".vbpfs-stepbar-dot",(function(i){i<=stepX?addClass(this,"active"):removeClass(this,"active")}))),$formStepBar.getElementsByClassName("vbpfs-stepbar-progressbar")[0].style.width=width+"%"}}function setActiveStep(targetStep){var isActiveStep=targetStep==$formActiveStep;$formActiveStep=targetStep,$formSteps.forEach((function(thisStep){thisStep==targetStep?addClass(thisStep,"active"):removeClass(thisStep,"active")})),$formActiveStep||focusFirstField(targetStep),showStepButtons(targetStep),buildStepsBar(targetStep)}return hasClass(form,"vbtMultiSteps")&&($formStepBar=form.getElementsByClassName("vbpfs-steps-bar")[0],$formPreviousBtn=form.getElementsByClassName("vbpfs-button-previous")[0],$formNextBtn=form.getElementsByClassName("vbpfs-button-next")[0],$formSubmitBtn=form.getElementsByClassName("vbpfs-button-submit")[0],activateSteps(!0),$formPreviousBtn&&$vbtJQ($formPreviousBtn).on("click",(function(e){return changeStep("previous")})),$formNextBtn&&$vbtJQ($formNextBtn).on("click",(function(e){return changeStep("next")}))),this.triggerNextStep=function(){return!(!$formActiveStep||$formActiveStep==$formLastStep)&&($formNextBtn&&fireEvent($formNextBtn,"click"),!0)},this.activateSteps=function(resetSteps){return $formActiveStep&&activateSteps(resetSteps),!1},null}function formDependentFields(form,$formMultiSteps,attrs){var $dependentFields=actionsDependentFields[attrs.keyName]||null;if($dependentFields){var targets={},sourceTargets={};return $dependentFields.forEach((function(target){targets[target.id]=target,target.rules.forEach((function(rule){sourceTargets[rule.source]=sourceTargets[rule.source]||[],sourceTargets[rule.source].push(rule.target)}))})),$formMultiSteps&&$formMultiSteps.activateSteps(),addDelegationEventsListener(form,"input, textarea, select","change paste keyup",(function(e){return changeEvent(this)})),null}function getInputValue(input){if("INPUT"==input.tagName){var getValues=function(parent,selector){return Array.prototype.map.call(parent.querySelectorAll(selector),(function(node){return node.value}))},row,row;if("checkbox"==input.type)return(row=getClosestRow(input))?getValues(row,"input[type=checkbox]:checked"):[];if("radio"==input.type)return(row=getClosestRow(input))&&getValues(row,"input[type=radio]:checked")[0]||""}return val(input)}function val(el){return el.options&&el.multiple?el.options.filter((function(option){return option.selected})).map((function(option){return option.value})):el.value}function checkRuleCondition(rule,inputValue){var ruleValue=String(rule.value).toLowerCase(),ruleValue1=String(rule.value1).toLowerCase();if(is_array(inputValue)){if(inputValue.length<1)return!1;var inArray=inputValue.reduce((function(exist,value){return exist||String(value).toLowerCase()==ruleValue}),!1);switch(rule.condition){case"is":return 1==inArray;case"isnot":return 0==inArray}return!1}if(empty(inputValue=String(inputValue).toLowerCase()))return!1;switch(rule.condition){case"is":return inputValue==ruleValue;case"isnot":return inputValue!=ruleValue;case"like":return inputValue.indexOf(ruleValue)>-1;case"greaterthan":if(is_numeric(inputValue)&&is_numeric(ruleValue))return parseInt(inputValue,10)>parseInt(ruleValue,10);break;case"lessthan":if(is_numeric(inputValue)&&is_numeric(ruleValue))return parseInt(inputValue,10)<parseInt(ruleValue,10);break;case"between":if(is_numeric(inputValue)&&is_numeric(ruleValue)&&is_numeric(ruleValue1))return parseInt(inputValue,10)>=parseInt(ruleValue,10)&&parseInt(inputValue,10)<=parseInt(ruleValue1,10)}return!1}function changeEvent(item){var id=(item.getAttribute("name")||"").replace("[]","").replace("SubscriptionForm[field][","").replace("]",""),targetIDs=sourceTargets[id]||[],changed=!1;targetIDs.forEach((function(targetId){var target=targets[targetId],targetBox=form.getElementsByClassName("vbpfs-row-dependent-"+targetId)[0];if(targetBox){var orRuleCondition="or"==target.grouping,show=!!target.rules.reduce((function(value,rule){if(orRuleCondition&&!0===value)return!0;if(!orRuleCondition&&!1===value)return!1;var input=form.getElementsByClassName("vbpfs-field-"+rule.source)[0],inputValue,result=checkRuleCondition(rule,!!input&&getInputValue(input));return null===value?result:orRuleCondition?value||result:value&&result}),null),isHidden=hasClass(targetBox,"vbpfs-row-dependent-hidden");targetBox.style.display=show?"":"none",show?removeClass(targetBox,"vbpfs-row-dependent-hidden"):addClass(targetBox,"vbpfs-row-dependent-hidden"),show===isHidden&&(changed=!0)}})),changed&&$formMultiSteps&&$formMultiSteps.activateSteps()}function getClosestRow(node){return getClosest(node,".vbpfs-row")}}function __(t){return t}function addClass(el,className){return $vbtJQ(el).addClass(className)}function removeClass(el,className){return $vbtJQ(el).removeClass(className)}function __checkForValidPersona(attrs){var stagePassCount=0,stagePassMax=5;(0==attrs.execFor||1==attrs.execFor&&visitor.ssId||2==attrs.execFor&&!visitor.ssId)&&stagePassCount++,"-1"!=attrs.filterGeoloc&&attrs.filterGeoloc!=visitor.country.toString().toLowerCase()||stagePassCount++,console.log("Geolocation: "+attrs.filterGeoloc),console.log("Visitor Location: "+visitor.country.toString().toLowerCase()),""!=attrs.filterGeolocstate&&"a:0:{}"!=attrs.filterGeolocstate.toString().toLowerCase()&&"n;"!=attrs.filterGeolocstate.toString().toLowerCase()&&attrs.filterGeolocstate.toString().toLowerCase()!=visitor.state.toString().toLowerCase()||stagePassCount++;var triggerCounter=__checkHowManyTimeActionIsTriggered(attrs);("0"==attrs.execInterval||"1"==attrs.execInterval&&1==triggerCounter||"2"==attrs.execInterval&&triggerCounter==attrs.execIntervalNbr)&&stagePassCount++;var isMobile=__checkIfMobileDevice();if(("0"==attrs.filterDevice||"2"==attrs.filterDevice&&isMobile||"1"==attrs.filterDevice&&!isMobile)&&stagePassCount++,""!=attrs.filterPPC){stagePassMax+=1;var utm_source=vbt_getValueFromURL(location.href,"utm_source");!utm_source&&vbt_getValueFromURL(location.href,"gclid")&&(utm_source="google"),utm_source&&("google"==(utm_source=utm_source.toLowerCase())?-1!=attrs.filterPPC.indexOf("1")&&stagePassCount++:"bing"==utm_source?-1!=attrs.filterPPC.indexOf("2")&&stagePassCount++:"facebook"==utm_source?-1!=attrs.filterPPC.indexOf("3")&&stagePassCount++:"twitter"==utm_source?-1!=attrs.filterPPC.indexOf("4")&&stagePassCount++:"linkedin"==utm_source?-1!=attrs.filterPPC.indexOf("5")&&stagePassCount++:"pinterest"==utm_source&&-1!=attrs.filterPPC.indexOf("6")&&stagePassCount++)}return console.log("Goal Action Passed: "+stagePassCount+" FROM "+stagePassMax),stagePassCount==stagePassMax}function _execActionToObject(attrs,callbackFunc,ignoreDelay){if(ignoreDelay||console.log("action has delay: "+attrs.delay+" seconds"),_actionInProgress){var queueItem=[];return queueItem.attrs=attrs,queueItem.callbackFunc=callbackFunc,_actionsQueue.push(queueItem),console.log("A new Action #"+attrs.objId+" has been sent to queue."),!1}if(!ignoreDelay&&attrs.delay>0){var _delayedArr=(vbt_getCookie("__vbDelayed")||"").split(",");-1==_delayedArr.indexOf(attrs.objId)&&(_delayedArr.push(attrs.objId),vbt_setCookie("__vbDelayed",_delayedArr.join(","),5)),__registerDelayAction(attrs),"function"==typeof callbackFunc&&callbackFunc()}else{__removeDelayedActionFromCookie(attrs.objId,attrs.execInterval);var randomVar=0,isOriginal=!0;void 0!==attrs.variations&&attrs.variations.length>0&&((randomVar=vbt_getRandomInt(0,attrs.variations.length))?(randomVar--,isOriginal=!1,console.log("My Variation is "+(randomVar+1)+" of "+(attrs.variations.length+1))):console.log("My Variation is the original"));var popupStyle=attrs.popStyle;switch(isOriginal||(popupStyle=attrs.variations[randomVar].popStyle),attrs.type){case"1":_registerActionToTrack(attrs,isOriginal?0:attrs.variations[randomVar].objId),0==popupStyle?isOriginal?_displayPopupWnd(attrs,attrs.messageId,attrs.delay,attrs.popTheme,null,callbackFunc):_displayPopupWnd(attrs,attrs.variations[randomVar].messageId,attrs.delay,attrs.variations[randomVar].popTheme,null,callbackFunc):1==popupStyle?_displayPopoverWnd(attrs.messageId,attrs._target,attrs.delay,attrs.popTheme,callbackFunc):2==popupStyle&&(isOriginal?_displayFooterBar(attrs,attrs.messageId,attrs.delay,attrs.popTheme,null,callbackFunc):_displayFooterBar(attrs,attrs.variations[randomVar].messageId,attrs.delay,attrs.variations[randomVar].popTheme,null,callbackFunc));break;case"2":var fAttrs;if(_registerActionToTrack(attrs,isOriginal?0:attrs.variations[randomVar].objId),isOriginal)console.log("original"),_displayPopupFormWnd(attrs,attrs.delay,attrs.popTheme,callbackFunc);else console.log("notoriginal"),(fAttrs={}).messageId=attrs.variations[randomVar].messageId,fAttrs.popStyle=popupStyle,fAttrs.formId=attrs.formId,fAttrs.objId=attrs.objId,_displayPopupFormWnd(fAttrs,attrs.delay,attrs.variations[randomVar].popTheme,callbackFunc);break;case"3":var fAttrs;if(_registerActionToTrack(attrs,isOriginal?0:attrs.variations[randomVar].objId),isOriginal)_displayPopupPollWnd(attrs,attrs.delay,attrs.popTheme,callbackFunc);else(fAttrs={}).messageId=attrs.variations[randomVar].messageId,fAttrs.popStyle=popupStyle,fAttrs.pollId=attrs.pollId,fAttrs.objId=attrs.objId,_displayPopupPollWnd(fAttrs,attrs.delay,attrs.variations[randomVar].popTheme,callbackFunc);break;case"4":_registerActionToTrack(attrs,0),_forceRedirectUrl(attrs.url,attrs.delay,callbackFunc);break;case"5":_registerActionToTrack(attrs,0),_injectJSCode(attrs.jscode,attrs.delay,callbackFunc)}}}function _displayPopupWnd(attrs,messageId,delay,theme,openCallback,closeCallback){if(_actionInProgress=!0,console.log("popup - MessageID: "+messageId),!visitor._vbtFlags.MicroModal){visitor._vbtFlags.MicroModal=!0;var MicroModalMarkup='<div id="vbtWebhookBox-overlay" tabindex="-1"><div id="vbtWebhookBox-container" role="dialog" aria-modal="true" ></div></div>';vbt_createElement("div",document.body,MicroModalMarkup,{id:"vbtWebhookBox","aria-hidden":"true"})}var webhookContainer=document.getElementById("vbtWebhookBox-container");webhookContainer.innerHTML="";var popup=document.getElementById(messageId);if(!popup){var popup2=document.getElementById("vb_newsletter_action_"+messageId.split("MyPopup_action_")[1]);popup2&&((popup=document.createElement("div")).id=messageId,popup2.parentNode.insertBefore(popup,popup2),popup.appendChild(popup))}if(popup){webhookContainer.appendChild(popup.cloneNode(!0));var form=$vbtJQ("form",webhookContainer).get(0);if(form){var $formMultiSteps=new formMultiSteps(form),$formDependentFields=new formDependentFields(form,$formMultiSteps,attrs);attachFlatPickr(form),attachRecaptcha(form),attachBirthdayPicker(form),attachCheckboxSelectStyler(form),attachRegionsAutoComplete(form);var cssStyle="";cssStyle+=".vboutLPGDPRErrorMessage, .vboutLPGDPRErrorMessage * { color: red !important; }",cssStyle+='form[data-vboutpopup="modal-form"] .iti {display: block;}',cssStyle+='form[data-vboutpopup="modal-form"] input[type=tel] {padding-left: 48px!important;}',cssStyle+=".vbtPopupThemeWrapper .vbtPopupThemeContent .vbpfs-form .vbpfs-input input[type=tel] {padding-left: 48px!important;}",cssStyle+=".vbtPopupThemeWrapper .vbtPopupThemeContent .vbpfs-form .recaptchaField > div {margin: 0 auto;}",cssStyle+=".flatpickr-calendar.animate.open {z-index: 99999999!important;}",$vbtJQ(form).append("<style>"+cssStyle+"</style>")}$vbtJQ("#VBOUT_FORM_CONTAINER [data-placeholder]").each((function(){$vbtJQ(this).attr("placeholder",$vbtJQ(this).attr("data-placeholder"))})),console.log("messageId to show: "+messageId),$vbtJQ("body").css("overflow","hidden"),$vbtJQ("[data-vboutpopup=modal-close-link]",webhookContainer).length||(1==theme?$vbtJQ("[data-vboutpopup=modal-body]",webhookContainer).append('<div data-vboutpopup="modal-close-link"><a href="#">Close this popup</a></div>'):13==theme?$vbtJQ("[data-vboutpopup=modal-theme]",webhookContainer).prepend('<a href="#" data-vboutpopup="modal-close-link">&nbsp;</a>'):15==theme?$vbtJQ("[data-vboutpopup=modal-theme]",webhookContainer).append('<a href="#" data-vboutpopup="modal-close-link">&nbsp;</a>'):17==theme?$vbtJQ("[data-vboutpopup=modal-theme]",webhookContainer).append('<a href="#" data-vboutpopup="modal-close-link">&nbsp;</a>'):2==theme?$vbtJQ("[data-vboutpopup=modal-body]",webhookContainer).append('<div data-vboutpopup="modal-close-link"><a href="#">Close this popup</a></div>'):3==theme?$vbtJQ("[data-vboutpopup=modal-body]",webhookContainer).append('<a data-vboutpopup="modal-close-link" href="#">x</a>'):4==theme?$vbtJQ("[data-vboutpopup=modal-body]",webhookContainer).append('<a data-vboutpopup="modal-close-link" href="#">x</a>'):5==theme&&$vbtJQ("[data-vboutpopup=modal-body]",webhookContainer).append('<a data-vboutpopup="modal-close-link" href="#">x</a>'));var _closeBtn=$vbtJQ("[data-vboutpopup=modal-close-link]",webhookContainer).get(0);_closeBtn&&($vbtJQ(_closeBtn).hasClass("vbtPopupThemeCloseBtn")?_closeBtn.innerHTML="X":empty(trim(_closeBtn.innerHTML))&&"A"==_closeBtn.tagName&&$vbtJQ(_closeBtn).addClass("f-link-empty")),$vbtJQ("[data-vboutpopup=modal-close-link]",webhookContainer).attr("href","javascript://"),$vbtJQ("[data-vboutpopup=modal-close-link]",webhookContainer).unbind("click").click((function(e){return e.preventDefault(),MicroModal.close("vbtWebhookBox"),!1})),$vbtJQ(".vbpfs-submit a.vbpfs-button",webhookContainer).unbind("click").click((function(e){setTimeout((function(){$vbtJQ("[data-vboutpopup=modal-close-link]",webhookContainer).trigger("click")}),500)})),$vbtJQ("input[type=file]",webhookContainer).each((function(){this.getAttribute("data-accept")&&!this.getAttribute("accept")&&this.setAttribute("accept",this.getAttribute("data-accept"))}));try{"function"==typeof openCallback&&openCallback(webhookContainer,{$formMultiSteps:$formMultiSteps})}catch(e){}MicroModal.show("vbtWebhookBox",{onShow:function(){$vbtJQ("html").css("overflow","hidden")},onClose:function(){try{_actionInProgress=!1,$vbtJQ("body").css("overflow",""),$vbtJQ("html").css("overflow","");try{"function"==typeof closeCallback&&closeCallback()}catch(e){}setTimeout(_execNextActionInQueue,250)}catch(e){}}})}}function _displayPopoverWnd(messageId,_target,delay,theme,callbackFunc){$vbtJQ(_target).popover({placement:"bottom",html:!0,title:"",content:function(){var div_id;return details_in_popup("tmp-id-"+$vbtJQ.now(),document.getElementById(messageId))},trigger:"manual"}).off("shown.bs.popover").on("shown.bs.popover",(function(){var $popup=$vbtJQ(this);"dark-theme"==theme&&$popup.next(".popover").addClass("dark"),$popup.next(".popover").find("button.close").unbind("click").click((function(e){$popup.popover("hide");try{"function"==typeof callbackFunc&&callbackFunc()}catch(e){}}))})).popover("show")}function _displayFooterBar(attrs,messageId,delay,theme,openCallback,closeCallback){_actionInProgress=!0,console.log("optin bar: "+messageId),$vbtJQ("#"+messageId).parents("#vb_newsletter_action_"+messageId.split("MyPopup_action_")[1]).length?$vbtJQ("#"+messageId).parents("#vb_newsletter_action_"+messageId.split("MyPopup_action_")[1]).show():$vbtJQ("#vb_message_action_"+messageId.split("MyPopup_action_")[1]).length?$vbtJQ("#vb_message_action_"+messageId.split("MyPopup_action_")[1]).show():$vbtJQ("#"+messageId).parent().is("body")?$vbtJQ("#"+messageId).show():$vbtJQ("#"+messageId).parent().show(),$vbtJQ("[data-vboutbar=modal-theme]").attr("style","");var webhookContainer=document.getElementById(messageId),form=$vbtJQ("form",webhookContainer).get(0);if(form){var $formMultiSteps=new formMultiSteps(form),$formDependentFields=new formDependentFields(form,$formMultiSteps,attrs);attachFlatPickr(form),attachRecaptcha(form),attachBirthdayPicker(form),attachCheckboxSelectStyler(form),attachRegionsAutoComplete(form);var cssStyle=".vboutLPGDPRErrorMessage, .vboutLPGDPRErrorMessage * { color: red !important; }";cssStyle+='form[data-vboutpopup="modal-form"] .iti {display: block;}',cssStyle+='form[data-vboutpopup="modal-form"] input[type=tel] {padding-left: 48px!important;}',cssStyle+=".vbtPopupThemeWrapper .vbtPopupThemeContent .vbpfs-form .vbpfs-input input[type=tel] {padding-left: 48px!important;}",cssStyle+=".flatpickr-calendar.animate.open {z-index: 99999999!important;}",$vbtJQ(form).append("<style>"+cssStyle+"</style>")}$vbtJQ("[data-vboutbar=modal-close-link]",webhookContainer).length||(14==theme?$vbtJQ("[data-vboutbar=modal-header]",webhookContainer).append('<div data-vboutbar="modal-close-link">&nbsp;</div>'):1==theme?$vbtJQ("[data-vboutbar=modal-header] [data-vboutbar=modal-container]",webhookContainer).append('<div data-vboutbar="modal-close-link">&#215;</div>'):10==theme?$vbtJQ("[data-vboutbar=modal-container]",webhookContainer).append('<div data-vboutbar="modal-close-link">&nbsp;</div>'):11==theme?$vbtJQ("[data-vboutbar=modal-container]",webhookContainer).append('<div data-vboutbar="modal-close-link">&#215;</div>'):12==theme?$vbtJQ("[data-vboutbar=modal-header] [data-vboutbar=modal-container]",webhookContainer).prepend('<div data-vboutbar="modal-close-link"><img alt="" style="min-width:16px!important;min-height:16px!important;" src="https://app.vbout.com/trackerjs/behaviors/optinbars/12/images/close.png"></div>'):13==theme?$vbtJQ("[data-vboutbar=modal-header]",webhookContainer).append('<div data-vboutbar="modal-close-link">&#215;</div>'):15==theme?$vbtJQ("[data-vboutbar=modal-header]",webhookContainer).append('<div data-vboutbar="modal-close-link">&nbsp;</div>'):16==theme?$vbtJQ("[data-vboutbar=modal-body]",webhookContainer).prepend('<div data-vboutbar="modal-close-link"><img alt="" src="https://app.vbout.com/trackerjs/behaviors/optinbars/16/images/close.png"></div> '):2==theme?$vbtJQ("[data-vboutbar=modal-header] [data-vboutbar=modal-container]",webhookContainer).append('<div data-vboutbar="modal-close-link">&#215;</div>'):3==theme?$vbtJQ("[data-vboutbar=modal-header] [data-vboutbar=modal-container]",webhookContainer).append('<div data-vboutbar="modal-close-link">&#215;</div>'):4==theme?$vbtJQ("[data-vboutbar=modal-privacy-info]").length?$vbtJQ("[data-vboutbar=modal-privacy-info]",webhookContainer).append('<p data-vboutbar="modal-privacy-negation"><a data-vboutbar="modal-close-link" href="#">No thanks, don\'t show this bar again.</a></p>'):$vbtJQ("[data-vboutbar=modal-container]",webhookContainer).append('<div data-vboutbar="modal-close-link">&#215;</div>'):7==theme?$vbtJQ("[data-vboutbar=modal-header]",webhookContainer).append('<div data-vboutbar="modal-close-link">&nbsp;</div>'):8==theme&&$vbtJQ("[data-vboutbar=modal-container]",webhookContainer).prepend('<div data-vboutbar="modal-close-link">&nbsp;</div>'));var _closeBtn=$vbtJQ("[data-vboutbar=modal-close-link]",webhookContainer).get(0);_closeBtn&&($vbtJQ(_closeBtn).hasClass("vbtPopupThemeCloseBtn")?_closeBtn.innerHTML="X":empty(trim(_closeBtn.innerHTML))&&"A"==_closeBtn.tagName&&$vbtJQ(_closeBtn).addClass("f-link-empty"));try{"function"==typeof openCallback&&openCallback(webhookContainer,{$formMultiSteps:$formMultiSteps})}catch(e){}$vbtJQ("[data-vboutbar=modal-close-link]",webhookContainer).unbind("click").click((function(e){e.preventDefault(),_actionInProgress=!1,$vbtJQ(webhookContainer).fadeOut("fast",(function(e){_actionInProgress=!1,$vbtJQ(this).parent().hide();try{"function"==typeof closeCallback&&closeCallback()}catch(e){}setTimeout(_execNextActionInQueue,250)}))})),$vbtJQ(".vbpfs-submit a.vbpfs-button",webhookContainer).unbind("click").click((function(e){setTimeout((function(){$vbtJQ("[data-vboutbar=modal-close-link]",webhookContainer).trigger("click")}),500)}))}function _displayPopupFormWnd(attrs,delay,theme,closeCallback){var messageId;messageId=attrs.messageId.replace(/[^_]/g,"").length>2?attrs.messageId.substring(0,15)+attrs.messageId.split("MyPopup_action_")[1].split("_")[0]+attrs.messageId.split("MyPopup_action_")[1].split("_")[1]:attrs.messageId;var formSubmit=0==attrs.popStyle?'[data-vboutpopup="modal-form-submit"]':'[data-vboutbar="modal-form-submit"]',insertErrorBox=function(message,input){var div=document.createElement("div");div.innerHTML='<div class="vboutEmbedFormErrorMessage">'+message+"</div>";var row=$vbtJQ(input).closest(".vbpfs-row").get(0),checkboxSelect=$vbtJQ(input).closest(".vbt-checkboxselectinput").get(0);if(row)if($vbtJQ(".vboutEmbedFormErrorMessage",row).remove(),"INPUT"!=input.tagName||"checkbox"!=input.type&&"radio"!=input.type)row.appendChild(div.children[0]);else if("checkbox"==input.type&&hasClass(input,"vfb-gdpr"));else if(checkboxSelect)checkboxSelect.parentNode.appendChild(div.children[0]);else{var field=$vbtJQ(".vbpfs-field",row).get(0)||input;field.parentNode.insertBefore(div.children[0],field)}},showErrorMessages=function(form,response){if($vbtJQ(".vboutEmbedFormErrorMessage",form).remove(),is_array(response.errorList)&&response.errorList.length){var inputs=form.querySelectorAll("input, select, textarea");response.errorList.forEach((function(error){var input;for(var i in inputs)if(0===((input=inputs[i]).name||"").indexOf(error.name))return void insertErrorBox(error.message,input)}))}},validateNewPopupVersionForm=function(popup,form){$vbtJQ(".vboutEmbedFormErrorMessage",form).remove(),$vbtJQ(".VBOUT_FORM_ERROR",popup).remove();var valid=!0;if($vbtJQ("input.required, select.required, textarea.required",form).each((function(){var field=this,value=$vbtJQ(this).val();if(""==value)insertErrorBox(__("This field is required."),this),valid=!1;else if($vbtJQ(this).hasClass("email")){var regex;/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(value)||(insertErrorBox(__("This field must be a valid email."),this),valid=!1)}})),$vbtJQ("input.vfb-gdpr",form).each((function(){var field=this,required;(this.name.indexOf("[gdpr]")>-1||$vbtJQ(this).hasClass("requiredOption"))&&!this.checked&&(valid=!1,insertErrorBox(__("This field is required."),this))})),$vbtJQ("input[type=tel]",form).each((function(){var field=this,newValue;$vbtJQ(this).hasClass("required")&&"_iti_country"in this&&this._iti_country&&(this.value.replace(/\+/g,"").replace(/\s/g,"").replace(/-/g,"")==this._iti_country&&(valid=!1,insertErrorBox(__("This field is required."),this)))})),$vbtJQ("input.birthday-picker",form).each((function(){var field=this;$vbtJQ(this).hasClass("required")&&($vbtJQ(this).val()||(valid=!1,insertErrorBox(__("This field is required."),this))),window.birthdayInput&&(window.birthdayInput(this,"validation")||(insertErrorBox(__("Invalid birthday date."),this),valid=!1))})),!valid){var msg=$vbtJQ('<div class="VBOUT_FORM_ERROR" />').html(__("Please check the errors in the form."));$vbtJQ(form).prepend(msg)}return valid},SubscriptionFormGDPR=function(form){return $vbtJQ(".vboutLPGDPRErrorMessage",form).removeClass("vboutLPGDPRErrorMessage"),$vbtJQ("input.vfb-gdpr",form).each((function(){(this.name.indexOf("[gdpr]")>-1||$vbtJQ(this).hasClass("requiredOption"))&&!this.checked&&$vbtJQ(this.parentNode).addClass("vboutLPGDPRErrorMessage")})),$vbtJQ(".vboutLPGDPRErrorMessage",form).get(0)?0:1},validatePhoneCountryCode=function(form){var valid=!0;return $vbtJQ("input[type=tel]",form).each((function(){var field=this,newValue;if($vbtJQ(this).hasClass("required")&&"_iti_country"in this&&this._iti_country&&this.value.replace(/\+/g,"").replace(/\s/g,"").replace(/-/g,"")==this._iti_country){valid=!1;var label=$vbtJQ('<label class="error" generated="true" />').html(__("This field is required.")),iti=$vbtJQ(this).closest(".iti--allow-dropdown").get(0);iti?label.insertAfter(iti):label.insertAfter(this)}})),valid},openCallback=function(popup,opts){$vbtJQ(formSubmit,popup).each((function(e){var form=$vbtJQ(this).parents("form").get(0);if(form&&!form._vbTWHF){form._vbTWHF=!0;var newPopupVersion=$vbtJQ(form).hasClass("vbpfs-form");if($vbtJQ(popup).find("#VBOUT_FORM_CONTAINER").find("form").css("float")&&2==attrs.popStyle&&$vbtJQ(popup).find("#VBOUT_FORM_CONTAINER").addClass("clearfix").css("width","auto"),setTimeout((function(){attachIntlTelPlugin(form),attachRegionsSelectBoxes(form)}),500),newPopupVersion)var updateSubmit=function(sending){var btn=$vbtJQ(popup).find("[data-vboutpopup=modal-form-submit], [data-vboutbar=modal-form-submit]").get(0);btn&&(sending?(btn.getAttribute("data-label")||btn.setAttribute("data-label",btn.innerHTML),btn.innerHTML='<img src="https://app.vbout.com/images/facebook-loader.gif" style="">'):btn.getAttribute("data-label")&&(btn.innerHTML=btn.getAttribute("data-label")))},success=function(data){if("error"==data.status){showErrorMessages(form,data);var msg=$vbtJQ('<div class="VBOUT_FORM_ERROR" />').html(data.message);$vbtJQ(form).prepend(msg)}else{$vbtJQ(popup).find(".vbtPopupThemeContainer").html(data.message),$vbtJQ(popup).find("#ClosePollForm").click((function(e){e.preventDefault(),e.stopPropagation(),$vbtJQ("[data-vboutpopup=modal-close-link], [data-vboutbar=modal-close-link]",popup).trigger("click")}));try{"redirect"in data&&""!=data.redirect&&window.open(data.redirect,"_blank")}catch(e){}}};else if(0==attrs.popStyle)var updateSubmit=function(sending){var btn=$vbtJQ(popup).find("[data-vboutpopup=modal-form-submit]").get(0);btn&&(sending?(btn.getAttribute("data-label")||btn.setAttribute("data-label",btn.innerHTML),btn.innerHTML='<img src="https://app.vbout.com/images/facebook-loader.gif" style=""> please wait...'):btn.getAttribute("data-label")&&(btn.innerHTML=btn.getAttribute("data-label")))},success=function(data){if("error"==data.status){var msg=$vbtJQ('<div class="VBOUT_FORM_ERROR" />').html(data.message);$vbtJQ(popup).find("#VBOUT_FORM_CONTAINER").prepend(msg)}else{$vbtJQ(popup).find("#VBOUT_FORM_CONTAINER").addClass("clearfix").addClass(data.status).html(data.message),$vbtJQ(popup).find("#ClosePollForm").click((function(e){e.preventDefault(),e.stopPropagation(),MicroModal.close("vbtWebhookBox")}));try{"redirect"in data&&""!=data.redirect&&window.open(data.redirect,"_blank")}catch(e){}}};else var updateSubmit=function(sending){var btn=$vbtJQ(popup).find("[data-vboutbar=modal-form-submit]").get(0);btn&&(sending?(btn.getAttribute("data-label")||btn.setAttribute("data-label",btn.innerHTML),btn.innerHTML='<img src="https://app.vbout.com/images/facebook-loader.gif" style=""> please wait...'):btn.getAttribute("data-label")&&(btn.innerHTML=btn.getAttribute("data-label")))},success=function(data){if("error"==data.status){var msg=$vbtJQ('<div class="VBOUT_FORM_ERROR" />').html(data.message);$vbtJQ(popup).find("#VBOUT_FORM_CONTAINER").prepend(msg)}else $vbtJQ(popup).find("#VBOUT_FORM_CONTAINER").addClass("clearfix").addClass(data.status).html(data.message),$vbtJQ(popup).find("#ClosePollForm").remove()};$vbtJQ(this).click((function(e){if(e.preventDefault(),opts.$formMultiSteps&&opts.$formMultiSteps.triggerNextStep())return!1;$vbtJQ(popup).find('[name="SubscriptionForm[sessionId]"]').val(visitor._sessionId);var formValidated=!0;if(newPopupVersion?formValidated=validateNewPopupVersionForm(popup,form):($vbtJQ(popup).find("input.required, input.required").each((function(){var regex;($vbtJQ(this).removeClass("popup-field-error"),$vbtJQ(this).next("p").remove(),""==$vbtJQ(this).val())?($vbtJQ(this).addClass("popup-field-error"),$vbtJQ(this).after('<p style="font-size:12px;color:#cc0000;">this field is required!</p>'),formValidated=!1):$vbtJQ(this).hasClass("email")?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($vbtJQ(this).val())?($vbtJQ(this).removeClass("popup-field-error"),$vbtJQ(this).next("p").remove()):($vbtJQ(this).addClass("popup-field-error"),$vbtJQ(this).after('<p style="font-size:12px;color:#cc0000;">this field must be a valid email!</p>'),formValidated=!1):($vbtJQ(this).removeClass("popup-field-error"),$vbtJQ(this).next("p").remove())})),$vbtJQ("input[type=file]",form).each((function(){if(this.files instanceof FileList&&this.files[0]&&!isNaN(this.files[0].size)&&this.files[0].size>0){var max=this.getAttribute("data-max-size"),size;if(!isNaN(max)&&max>0)if(this.files[0].size/1024/1024>max)return formValidated=!1,$vbtJQ(this).addClass("popup-field-error"),void $vbtJQ(this).after('<p style="font-size:12px;color:#cc0000;">File size exceeded max size</p>')}})),SubscriptionFormGDPR(form)||(formValidated=!1),validatePhoneCountryCode(form)||(formValidated=!1)),formValidated){var ajaxOptions={url:vbt_baseURL+"tracker/newsletter/"+attrs.formId+"/"+attrs.objId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain+"&webhookid="+(attrs.actionId?attrs.actionId:""),type:"POST",dataType:"json",data:$vbtJQ(popup).find("form").serialize(),beforeSend:function(){$vbtJQ(popup).find(".VBOUT_FORM_ERROR").remove(),updateSubmit(!0)},success:function(data){updateSubmit(!1),success(data),"success"!=data.status&&"confirm"!=data.status||data.id>0&&(visitor.ssId=data.id,visitorTrackInfo.ssId=data.id,vbt_setCookie("__ssId",visitor.ssId,168),vbt_GetSubscriberInfo(!0))},error:function(ex){updateSubmit(!1),$vbtJQ(popup).find(".pollingFormContainer").html("An error occured: "+ex.status+" "+ex.statusText)}};ajaxOptions.beforeSend(),ajaxPostFormData(ajaxOptions.url,$vbtJQ(popup).find("form").get(0),ajaxOptions.success,ajaxOptions.error)}}))}}))};0==attrs.popStyle?(_displayPopupWnd(attrs,messageId,delay,theme,openCallback,closeCallback),$vbtJQ("body").css("overflow","hidden")):_displayFooterBar(attrs,messageId,delay,theme,openCallback,closeCallback)}function _displayPopupPollWnd(attrs,delay,theme,callbackFunc){var messageId;messageId=attrs.messageId.replace(/[^_]/g,"").length>2?attrs.messageId.substring(0,15)+attrs.messageId.split("MyPopup_action_")[1].split("_")[0]+attrs.messageId.split("MyPopup_action_")[1].split("_")[1]:attrs.messageId;var formSubmit=0==attrs.popStyle?'[data-vboutpopup="modal-form-submit"]':'[data-vboutbar="modal-form-submit"]',openCallback=function(popup){$vbtJQ(formSubmit,popup).each((function(e){var form=$vbtJQ(this).parents("form").get(0);if(!form._vbTWHF){form._vbTWHF=!0;var newPopupVersion=$vbtJQ(form).hasClass("vbpfs-form");$vbtJQ(form).submit((function(e){e.preventDefault()})),$vbtJQ(popup).find("#PollChoices label > span").click((function(){$vbtJQ(this).parent().parent().find("input[type=radio]").attr("checked",!0)})),$vbtJQ(this).click((function(e){if(e.preventDefault(),$vbtJQ(popup).find('[name="PollForm[sessionId]"]').val(visitor._sessionId),newPopupVersion)var updateSubmit=function(sending){var btn=$vbtJQ(popup).find("[data-vboutpopup=modal-form-submit], [data-vboutbar=modal-form-submit]").get(0);btn&&(sending?(btn.getAttribute("data-label")||btn.setAttribute("data-label",btn.innerHTML),btn.innerHTML='<img src="https://app.vbout.com/images/facebook-loader.gif" style="">'):btn.getAttribute("data-label")&&(btn.innerHTML=btn.getAttribute("data-label")))},beforeSend=function(){$vbtJQ(".VBOUT_FORM_ERROR",form).remove(),updateSubmit(!0)},success=function(data){if(updateSubmit(!1),"error"==data.status){var msg=$vbtJQ('<div class="VBOUT_FORM_ERROR" />').html(data.message);$vbtJQ(form).prepend(msg)}else{$vbtJQ(popup).find(".vbtPopupThemeContainer").html(data.message),$vbtJQ(popup).find("#ClosePollForm").click((function(e){e.preventDefault(),e.stopPropagation(),$vbtJQ("[data-vboutpopup=modal-close-link], [data-vboutbar=modal-close-link]",popup).trigger("click")}));try{"redirect"in data&&""!=data.redirect&&window.open(data.redirect,"_blank")}catch(e){}}};else if(0==attrs.popStyle)var beforeSend=function(){$vbtJQ(popup).find(".pollingFormContainer [data-vboutpopup=modal-form-submit]").data("label",$vbtJQ(popup).find(".pollingFormContainer [data-vboutpopup=modal-form-submit]").html()),$vbtJQ(popup).find(".pollingFormContainer [data-vboutpopup=modal-form-submit]").html('<img src="https://app.vbout.com/images/facebook-loader.gif" style=""> please wait...')},success=function(data){data&&($vbtJQ(popup).find(".pollingFormContainer").addClass(data.status).html(data.message),$vbtJQ(popup).find("#ShowResults").unbind("click").click((function(e){e.preventDefault(),$vbtJQ(popup).find(".pollingFormContainer").removeClass(data.status).html("RESULTS ARE GONE!!!")}))),$vbtJQ(popup).find("#ClosePollForm").click((function(e){e.preventDefault(),MicroModal.close("vbtWebhookBox")}))};else var beforeSend=function(){$vbtJQ(popup).find(".pollingFormContainer [data-vboutbar=modal-form-submit]").data("label",$vbtJQ(popup).find(".pollingFormContainer [data-vboutbar=modal-form-submit]").html()),$vbtJQ(popup).find(".pollingFormContainer [data-vboutbar=modal-form-submit]").html('<img src="https://app.vbout.com/images/facebook-loader.gif" style=""> please wait...')},success=function(data){data&&($vbtJQ(popup).find(".pollingFormContainer").addClass(data.status).html(data.message),$vbtJQ(popup).find("#ShowResults").unbind("click").click((function(e){e.preventDefault(),$vbtJQ(popup).find(".pollingFormContainer").removeClass(data.status).html("RESULTS ARE GONE!!!")}))),$vbtJQ(popup).find("#ClosePollForm").hide()};0==$vbtJQ(popup).find('input[type="radio"]:checked').length?alert("Please check an option"):$vbtJQ.ajax({url:vbt_baseURL+"tracker/poll/"+attrs.pollId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:$vbtJQ(popup).find("form").serialize(),beforeSend:function(){beforeSend()},success:function(data){success(data)},error:function(ex){$vbtJQ(popup).find(".pollingFormContainer").html("An error occured: "+ex.status+" "+ex.statusText)}})}))}}))};0==attrs.popStyle?_displayPopupWnd(attrs,attrs.messageId,delay,theme,openCallback,callbackFunc):2==attrs.popStyle&&_displayFooterBar(attrs,attrs.messageId,delay,theme,openCallback,callbackFunc)}function _forceRedirectUrl(url,delay,callbackFunc){window.location=url}function _injectJSCode(scriptCode,delay,callbackFunc){$vbtJQ("body").append(scriptCode.replace(/&quot;/g,'"')),"function"==typeof callbackFunc&&callbackFunc()}function details_in_popup(div_id,container){var goalId=$vbtJQ(container).attr("data-goalid"),userId=visitor.ssId||visitor.ip;return $vbtJQ.ajax({url:vbt_baseURL+"tracker/message/"+goalId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:"pageUrl="+document.URL+"&pageTitle="+document.title+"&userId="+userId,success:function(data){$vbtJQ("#"+div_id).find(".inner").html(data.message)},error:function(ex){$vbtJQ("#"+div_id).html("An error occured: "+ex.status+" "+ex.statusText)}}),'<div id="'+div_id+'"><button style="position: absolute; right: 10px; top: 4px; z-index: 105001; border: 0 none; cursor: pointer; padding: 0; color: #000; float: right; font-size: 21px; font-weight: bold; line-height: 1; opacity: 0.2; text-shadow: 0 1px 0 #fff;" class="close close-right-button" type="button">×</button><div class="inner"><div style="width: 280px">Loading...</div></div></div>'}function __registerDelayAction(attrs){vbt_getCookie("__vbDelayedAction_"+attrs.objId)||(attrs._target=null,vbt_setCookie("__vbDelayedAction_"+attrs.objId,Base64.encode(JSON.stringify({objId:attrs.objId,delay:attrs.delay})),5)),setTimeout((function(){_execActionDelayedTimer(attrs.objId)}),1e3)}function __removeDelayedActionFromCookie(objId,execInterval){0==execInterval&&vbt_deleteCookie("__vbDelayedAction_"+objId);var _delayedArr=(vbt_getCookie("__vbDelayed")||"").split(","),_newDelayedArr=[];for(i=0;i<_delayedArr.length;i++)_delayedArr[i]!=objId&&_newDelayedArr.push(objId);vbt_setCookie("__vbDelayed",_newDelayedArr.join(","),5),console.log("ActionID: "+objId+" removed from cookie.")}function _registerActionToTrack(attrs,variationId){"undefined"!==visitorTrackInfo?actionAlreadySent?visitorTrackInfo.updateActionVariation(attrs.objId,variationId):attrs.actionId&&visitorTrackInfo.trackAction(attrs.actionId,variationId):setTimeout((function(){_registerActionToTrack(attrs,variationId)}),1e3)}function _execActionDelayedTimer(actionId){var delayedAction=vbt_getCookie("__vbDelayedAction_"+actionId);if(delayedAction)try{var delayedAttrs=JSON.parse(Base64.decode(delayedAction));if(delayedAttrs.delay<=0){var id="webhook"+delayedAttrs.objId,attrs=id in _actionsBank?_actionsBank[id]:null;null===attrs&&(attrs=(id="goal"+delayedAttrs.objId)in _actionsBank?_actionsBank[id]:null),attrs?(console.log("delay finish execute it now!!!!"),_execActionToObject(attrs,"",!0)):__removeDelayedActionFromCookie(delayedAttrs.objId,0)}else delayedAttrs.delay-=1,vbt_setCookie("__vbDelayedAction_"+delayedAttrs.objId,Base64.encode(JSON.stringify(delayedAttrs)),5),setTimeout((function(){_execActionDelayedTimer(actionId)}),1e3)}catch(e){}}function _execNextActionInQueue(){if(_actionsQueue.length){var actionToBeExec=_actionsQueue.shift();_execActionToObject(actionToBeExec.attrs,actionToBeExec.callbackFunc)}}function __checkHowManyTimeActionIsTriggered(attrs){var nbr=0;return attrs.isaction?(nbr=vbt_getCookie("__vbAction_"+attrs.objId+"_"+visitor._sessionId),console.log("Action is triggered: "+nbr)):(nbr=vbt_getCookie("__vbGoal_"+attrs.objId),console.log("Goal is triggered: "+nbr)),isNaN(nbr)?0:nbr}}if(isGoalEnabled){function _execSendEmailToSubscriber(funnelPage){var userId=vbt_getCookie("__ssId");userId&&(console.log("send email to subscriber: "+userId),$vbtJQ.ajax({url:vbt_baseURL+"tracker/email/"+funnelPage.funnelId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:"userId="+userId+"&messageId="+funnelPage.emailId,success:function(data){console.log("Email sent to subscriber "+userId)},error:function(ex){console.log("Email error not sent to subscriber "+userId)}}))}function _execSendEmailToAnonymous(funnelPage){var regexEmail=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,})+$/;_vbset.forEach((function(vbvar){var input;"__vbvar__"==vbvar[0]&&("_listID"!=vbvar[1][0]&&((input=$vbtJQ("#"+vbvar[1][1])).length||(input=$vbtJQ('[name="'+vbvar[1][1]+'"]')),input&&input.length&&(input.attr("data-vboutcapture",!0),input.attr("data-fieldid",vbvar[1][0]),input.on("change",(function(){regexEmail.test($vbtJQ(this).val())&&(clearTimeout(__GLOBAL__TIMER),__GLOBAL__TIMER=setTimeout((function(){_execSignupToListForAnonymous(funnelPage)}),500),__GLOBAL__TIMER_FLAG=1)})),input.on("blur",(function(){""!=$vbtJQ(this).val()&&regexEmail.test($vbtJQ(this).val())&&__GLOBAL__TIMER_FLAG&&(clearTimeout(__GLOBAL__TIMER),__GLOBAL__TIMER=setTimeout((function(){_execSignupToListForAnonymous(funnelPage)}),500))})))))}))}function _execSignupToListForAnonymous(funnelPage){var fields=getFormFieldValues($vbtJQ,null),formAttributes={listId:fields.listId,ip:visitor.ip,sessId:visitor._sessionId,AnonymousSignupForm:{fields:fields.fields}};$vbtJQ.ajax({url:vbt_baseURL+"tracker/anonymous/signup/"+funnelPage.funnelId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:formAttributes,success:function(data){data.emailid>0?(console.log("Email prepared to be sent to anonymous subscriber No."+data.emailid),vbt_setCookie("__ssId",data.emailid,168),vbt_setCookie("__reset","1",168)):console.log("Email failed.")},error:function(ex){console.log("Email error not sent to anonymous!!!")}})}function _execResetAnyAnonymousEmail(funnelId,userId){$vbtJQ.ajax({url:vbt_baseURL+"tracker/anonymous/reset/"+funnelId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:"userId="+userId,success:function(data){vbt_deleteCookie("__reset"),console.log("Anonymous has been reseted: "+userId)},error:function(ex){console.log("Error reseting anonymous!!!")}})}function __checkAddActionTimerTrigger(funnelPageId){var vbFunnelAddAction=vbt_getCookie("__vbFunnelAddAction_"+funnelPageId);if(vbFunnelAddAction){var addActionObj=JSON.parse(vbFunnelAddAction);0==addActionObj.secondsLeft?(clearInterval(__funnelAddActionTimer),vbt_deleteCookie("__vbFunnelAddAction_"+funnelPageId),console.log("timer off - now the add action is triggered!"),_execAddActionToObject("vb_funnel_message_"+funnelPageId,addActionObj.delay)):(addActionObj.secondsLeft-=1,vbt_setCookie("__vbFunnelAddAction_"+funnelPageId,JSON.stringify(addActionObj),5))}}function _execAddActionToObject(addActionId,addActionType){if(console.log("Add Action Type: "+addActionType),"0"==addActionType)_displayFunnelPopupWnd(addActionId,"light-theme");else if("1"==addActionType&&visitor.ssId){var userId=visitor.ssId,funnelId=$vbtJQ(document.getElementById(messageId)).attr("data-funnelid");$vbtJQ.ajax({url:vbt_baseURL+"tracker/email/"+funnelId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:"userId="+userId,success:function(data){console.log("Email sent to subscriber "+userId)},error:function(ex){console.log("Email error not sent to subscriber "+userId)}})}}function _displayFunnelPopupWnd(messageId,theme){console.log(messageId),$.vboutModal(document.getElementById(messageId),{overlayClose:!0,containerCss:{height:"auto"},additionalClass:theme,onClose:function(){$vbtJQ("body").css("overflow","auto")},onShow:function(){prepareFunnelMessageBody(document.getElementById(messageId))}}),$vbtJQ("body").css("overflow","hidden")}function prepareFunnelMessageBody(container){var funnelId=$vbtJQ(container).attr("data-funnelid"),userId=visitor.ssId||visitor.ip;$vbtJQ.ajax({url:vbt_baseURL+"tracker/fmessage/"+funnelId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:"pageUrl="+document.URL+"&pageTitle="+document.title+"&userId="+userId,beforeSend:function(){$vbtJQ(container).html("please wait...")},success:function(data){$vbtJQ(container).html(data.message),$vbtJQ(window).trigger("resize.simplemodal")},error:function(ex){$vbtJQ(container).html("An error occured: "+ex.status+" "+ex.statusText)}})}}if(isFormMappingEnabled)function _execSendFormEmailToAnonymous(id,name,form,listId,goalId){_vbset.forEach((function(vbvar){if("__vbvar__"==vbvar[0]&&"_listID"!=vbvar[1][0]){var elem=$vbtJQ("#"+vbvar[1][1],form);elem.length||(elem=$vbtJQ('[name="'+vbvar[1][1]+'"]',form)),elem.length&&(elem.attr("data-vboutcapture",!0),elem.attr("data-fieldid",vbvar[1][0]),elem.change((function(){var regex;/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($vbtJQ(this).val())&&(clearTimeout(__GLOBAL__TIMER),__GLOBAL__TIMER=setTimeout((function(){_execSignupToListForFormAnonymous(id,name,form,listId,goalId)}),500),__GLOBAL__TIMER_FLAG=1)})),elem.blur((function(){var regex;__GLOBAL__TIMER_FLAG&&(""!=$vbtJQ(this).val()&&/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($vbtJQ(this).val())&&(clearTimeout(__GLOBAL__TIMER),__GLOBAL__TIMER=setTimeout((function(){_execSignupToListForFormAnonymous(id,name,form,listId,goalId)}),500)))})))}}))}function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function _execSignupToListForFormAnonymous(id,name,form,listId,goalId){var fields=getFormFieldValues($vbtJQ,form),formAttributes={listId:listId,ip:visitor.ip,sessId:visitor._sessionId,AnonymousSignupForm:{fields:fields.fields}};jQuery.ajax({url:"https://app.vbout.com/tracker/anonymous/form/signup/"+goalId+"/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:formAttributes,success:function(data){if(data&&data.emailid>0){console.log("Email prepared to be sent to anonymous subscriber No."+data.emailid);var expdate=new Date((new Date).getTime()+6048e5);document.cookie="__ssId="+escape(data.emailid)+"; expires="+expdate.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath,document.cookie="__reset=1; expires="+expdate.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath}else console.log("Email failed.")},error:function(ex){console.log("Email error not sent to anonymous!!!")}})}function _executeRegisterToThisList(field,fieldType){var emailInput=jQuery("["+fieldType+"="+field+"]").get(0),form=emailInput?closestTag(emailInput,"form"):null,input,inputs=[],timer;if(form&&(_vbset.forEach((function(vbvar){var input,el;"__vbvar__"==vbvar[0]&&("_listID"!=vbvar[1][0]&&(el=document.getElementById(vbvar[1][1]),(input=$vbtJQ(el||'[name="'+vbvar[1][1]+'"]',form))&&input.each((function(){inputs.push(this)}))))})),inputs.length))return void inputs.forEach((function(input){vbt_attachEvent(input,"keypress",(function(){this._vbtChanged=!0,clearTimeout(timer)}),!0),vbt_attachEvent(input,"paste",(function(){this._vbtChanged=!0,clearTimeout(timer)}),!0),vbt_attachEvent(input,"focus",(function(){this._vbtValue=jQuery(this).val()}),!0),vbt_attachEvent(input,"blur",(function(){this._vbtChanged&&this._vbtValue==jQuery(this).val()&&fireEvent(this,"change"),this._vbtChanged=!1}),!0),vbt_attachEvent(input,"change",(function(){var regex;clearTimeout(timer),/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,})+$/.test(jQuery(emailInput).val())&&(timer=setTimeout((function(){_execSignupToThisList()}),1500))}),!0)}));jQuery("["+fieldType+"="+field+"]").change((function(){var regex;/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(jQuery(this).val())&&(clearTimeout(__GLOBAL__TIMER),__GLOBAL__TIMER=setTimeout((function(){_execSignupToThisList()}),500),__GLOBAL__TIMER_FLAG=1)}))}function _execSignupToThisList(){var fields=getFormFieldValues($vbtJQ),formAttributes={listId:fields.listId,ip:visitor.ip,sessId:visitor._sessionId,AnonymousSignupForm:{fields:fields.fields}};jQuery.ajax({url:vbt_baseURL+"tracker/anonymous/signup3/?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,type:"POST",dataType:"json",data:formAttributes,success:function(data){if(data.emailid>0){var expdate=new Date((new Date).getTime()+6048e5);document.cookie="__ssId="+escape(data.emailid)+"; expires="+expdate.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath,document.cookie="__reset=1; expires="+expdate.toUTCString()+";domain="+_cookieDomain+";path="+_cookiePath,console.log(data.emailid)}},error:function(ex){console.log("Email error not sent to anonymous!!!")}})}function vbt_showMappingTools(){!function(jQuery){if(4706==profileID)var mappingMenu='<style>#device-overlay-mobile {width:375px;left:50%;margin-left:-187px;z-index:997;position: fixed;top: 0;height: 100%;background-color: #000;opacity: 0.2;border-left: 3px solid #f00;border-right: 3px solid #f00;}#device-overlay-tablet {width:768px;left:50%;margin-left:-384px;z-index:997;position: fixed;top: 0;height: 100%;background-color: #000;opacity: 0.2;border-left: 3px solid #f00;border-right: 3px solid #f00;}.chosen-container .chosen-results{max-height:150px!important;}#clickmap-loading,#heatmap-loading,#scrollmap-loading{position: fixed; top: 2%; width: 100%; left: 0%; height: 100%; background: transparent url("https://app.vbout.com//images/preloader-map.gif") no-repeat scroll center center; z-index: 99996;}#clickmap-overlay,#heatmap-overlay,#scrollmap-overlay{z-index:99997;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;filter:alpha(opacity=70);opacity:.7}#clickmap-container span.clickmap{display: block;position:absolute;width:20px;height:20px;background:url(https://app.vbout.com//images/clickdot.png) center center no-repeat;z-index:99998;}[data-vbtooltip],.tooltip{position:relative;cursor:pointer}[data-vbtooltip]:before,[data-vbtooltip]:after{position:absolute;visibility:hidden;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);opacity:0;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translate3d(0,0,0);pointer-events:none}[data-vbtooltip]:hover:before,[data-vbtooltip]:hover:after,[data-vbtooltip]:focus:before,[data-vbtooltip]:focus:after{visibility:visible;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);opacity:1}[data-vbtooltip]:before{z-index:1001;border:6px solid transparent;background:transparent;content:""}[data-vbtooltip]:after{z-index:1000;padding:8px;width:160px;background-color:#000;background-color:hsla(0,0%,20%,0.9);color:#fff;content:attr(data-vbtooltip);font-size:14px;line-height:1.2;border-radius: 5px;}[data-vbtooltip]:before,[data-vbtooltip]:after{bottom:100%;left:50%}[data-vbtooltip]:before{margin-left:-6px;margin-bottom:-12px;border-top-color:#000;border-top-color:hsla(0,0%,20%,0.9)}[data-vbtooltip]:after{margin-left:-80px}[data-vbtooltip]:hover:before,[data-vbtooltip]:hover:after,[data-vbtooltip]:focus:before,[data-vbtooltip]:focus:after{-webkit-transform:translateY(-12px);-moz-transform:translateY(-12px);transform:translateY(-12px)}.vbtooltip-left:before,.vbtooltip-left:after{right:100%;bottom:50%;left:auto}.vbtooltip-left:before{margin-left:0;margin-right:0px;margin-bottom:0;border-top-color:transparent;border-left-color:#000;border-left-color:hsla(0,0%,20%,0.9)}.v-left:hover:before,.vbtooltip-left:hover:after,.vbtooltip-left:focus:before,.vbtooltip-left:focus:after{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);transform:translateX(-12px)}.vbtooltip-left:before{top:23px}.vbtooltip-left:after{margin-left:0;margin-bottom:-16px}[data-vbtooltip]:focus::before{transform: translateX(0);transform: translateY(-12px);}</style><div id="HeatMapScreen" style="z-index: 99999;position: fixed; left: 0; top: 50%; margin-top: -155px;  border:1px solid #000; width: 36px; height: 310px;border-left: 0;display: none;"><img src="https://app.vbout.com//images/heatmap_bg.jpg"></div><div id="FilterMappingMenu" style="background-color: rgb(255, 255, 255); position: fixed; right: -243px; top: 20px; box-shadow: 0px 0px 5px rgb(51, 51, 51); z-index: 999999; border-radius: 7px 0px 0px 7px;"><a style="text-decoration: none; font-family: arial; font-size: 15px; display: none; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px 5px; position: absolute; left: -30px; top: 10px; box-shadow: 0px 0px 5px rgb(51, 51, 51); width: 25px;box-sizing: unset;font-weight: bold;text-align: center;padding: 3px;" id="FilterMappingHeat" data-vbtooltip="Show Filter" class="vbtooltip-left" href="javascript://">x</a><a id="ResponsiveScreen" style="display: none;text-decoration: none; font-family: arial; font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px 5px; position: absolute; left: -35px; top: 100px; box-shadow: 0px 0px 5px rgb(51, 51, 51); width: 25px;box-sizing: unset;" onclick="javascript:void((function(d){if(self!=top||d.getElementById(&#039;toolbar&#039;)&amp;&amp;d.getElementById(&#039;toolbar&#039;).getAttribute(&#039;data-resizer&#039;))return false;d.write(&#039;&lt;!DOCTYPE HTML&gt;&lt;html style=&quot;opacity:0;&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;/&gt;&lt;/head&gt;&lt;body&gt;&lt;a data-viewport=&quot;375&times;667&quot; data-icon=&quot;mobile&quot; &gt;Apple iPhone 7&lt;/a&gt;&lt;a data-viewport=&quot;768x1024&quot; data-icon=&quot;tablet&quot;&gt;Tablet (e.g. Apple iPad 2-3rd, mini)&lt;/a&gt;&lt;a data-viewport=&quot;1920&times;1080&quot; data-icon=&quot;tv&quot;&gt;HDTV 1080p&lt;/a&gt;&lt;script src=&quot;https://app.vbout.com//js/resizer-enhanced.min.js?v=707536&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&#039;)})(document));" data-vbtooltip="Show Responsive Toolbar" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/map_responsive.png"></a><span style="position: absolute; left: 0px; display: block; background-color: rgb(255, 255, 255); z-index: 9997; width: 10px; height: 40px; top: 6px;"></span><form id="FilterMappingForm" style="padding: 10px;"><div><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by date:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Date" name="FilterField[date]"><option value="0">- Everyday -</option><option value="1">Today</option><option value="2">Yesterday</option><option value="3">Last Week</option><option value="4">Last Month</option></select></div><div><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by Visitors:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Visitors" name="FilterField[visitor]"><option value="0">- Everyone -</option><option value="1">Anonymous Visits</option><option value="2">Subscriber Visits</option></select></div><div style="display: none;"><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by device:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Device" name="FilterField[device]"><option value="">- All devices -</option><option value="0" selected="selected">Desktop Only</option><option value="2">tablets Only</option><option value="1">Mobile Only</option></select></div><div><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by location:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Location" name="FilterField[location]"><option value="0">- Anywhere -</option></select></div><div style="padding-top: 10px;"><p id="ApplyFilterMessage" style="color: green; margin: 0px 0px 10px!important; display: none;">Filter applied...</p><button id="ApplyFilterMappingButton" name="ApplyFilterMappingButton" type="button" style="padding: 5px 20px;font-size: 14px;margin: 0 auto;display: block;width: 100%;">Apply Filter</button><button style="padding: 0;display:none;" id="CloseFilterMappingButton" name="CloseFilterMappingButton" type="button">Close</button></div></form></div><div id="MappingMenu" style="display: none; background-color: rgb(0, 0, 0); position: fixed; right: 0px; top: 20px; box-shadow: 0px 0px 5px rgb(51, 51, 51); z-index: 99999; border-radius: 7px 0px 0px 7px;"><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px;" id="GetHeatMaps" data-vbtooltip="Show Heatmap" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/heat_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: #7cb138; color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px;display: none;" id="HideHeatMaps" data-vbtooltip="Hide Heatmap" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/heat_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; padding: 5px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); margin-top: 1px;" id="GetClickMaps" data-vbtooltip="Show ClickMap" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/click_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; padding: 5px; background-color: #7cb138; color: rgb(0, 0, 0); margin-top: 1px;display: none;" data-vbtooltip="Hide ClickMap" class="vbtooltip-left" id="HideClickMaps" href="javascript://"><img src="https://app.vbout.com//images/click_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); margin-top: 1px; padding: 5px; border-radius: 0px 0px 0px 5px;" id="GetScrollMaps" class="vbtooltip-left" data-vbtooltip="Show ScrollMap" href="javascript://"><img src="https://app.vbout.com//images/scroll_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: #7cb138; color: rgb(0, 0, 0); margin-top: 1px; padding: 5px; border-radius: 0px 0px 0px 5px;display: none;" data-vbtooltip="Hide ScrollMap" class="vbtooltip-left" id="HideScrollMaps" href="javascript://"><img src="https://app.vbout.com//images/scroll_map.png"></a></div><canvas id="canvas" style="left: 0px; top: 0px; z-index: 99999; position: absolute; opacity: 0.5; display: none;"></canvas><canvas id="scrollcanvas" style="left: 0px; top: 0px; z-index: 99999; position: absolute; opacity: 0.5; display: none;"></canvas>';else var mappingMenu='<style>#device-overlay-mobile {width:375px;left:50%;margin-left:-187px;z-index:997;position: fixed;top: 0;height: 100%;background-color: #000;opacity: 0.2;border-left: 3px solid #f00;border-right: 3px solid #f00;}#device-overlay-tablet {width:768px;left:50%;margin-left:-384px;z-index:997;position: fixed;top: 0;height: 100%;background-color: #000;opacity: 0.2;border-left: 3px solid #f00;border-right: 3px solid #f00;}.chosen-container .chosen-results{max-height:150px!important;}#clickmap-loading,#heatmap-loading,#scrollmap-loading{position: fixed; top: 2%; width: 100%; left: 0%; height: 100%; background: transparent url("https://app.vbout.com//images/preloader-map.gif") no-repeat scroll center center; z-index: 99996;}#clickmap-overlay,#heatmap-overlay,#scrollmap-overlay{z-index:99997;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;filter:alpha(opacity=70);opacity:.7}#clickmap-container span.clickmap{display: block;position:absolute;width:20px;height:20px;background:url(https://app.vbout.com//images/clickdot.png) center center no-repeat;z-index:99998;}[data-vbtooltip],.tooltip{position:relative;cursor:pointer}[data-vbtooltip]:before,[data-vbtooltip]:after{position:absolute;visibility:hidden;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);opacity:0;-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);transform:translate3d(0,0,0);pointer-events:none}[data-vbtooltip]:hover:before,[data-vbtooltip]:hover:after,[data-vbtooltip]:focus:before,[data-vbtooltip]:focus:after{visibility:visible;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);opacity:1}[data-vbtooltip]:before{z-index:1001;border:6px solid transparent;background:transparent;content:""}[data-vbtooltip]:after{z-index:1000;padding:8px;width:160px;background-color:#000;background-color:hsla(0,0%,20%,0.9);color:#fff;content:attr(data-vbtooltip);font-size:14px;line-height:1.2;border-radius: 5px;}[data-vbtooltip]:before,[data-vbtooltip]:after{bottom:100%;left:50%}[data-vbtooltip]:before{margin-left:-6px;margin-bottom:-12px;border-top-color:#000;border-top-color:hsla(0,0%,20%,0.9)}[data-vbtooltip]:after{margin-left:-80px}[data-vbtooltip]:hover:before,[data-vbtooltip]:hover:after,[data-vbtooltip]:focus:before,[data-vbtooltip]:focus:after{-webkit-transform:translateY(-12px);-moz-transform:translateY(-12px);transform:translateY(-12px)}.vbtooltip-left:before,.vbtooltip-left:after{right:100%;bottom:50%;left:auto}.vbtooltip-left:before{margin-left:0;margin-right:0px;margin-bottom:0;border-top-color:transparent;border-left-color:#000;border-left-color:hsla(0,0%,20%,0.9)}.v-left:hover:before,.vbtooltip-left:hover:after,.vbtooltip-left:focus:before,.vbtooltip-left:focus:after{-webkit-transform:translateX(-12px);-moz-transform:translateX(-12px);transform:translateX(-12px)}.vbtooltip-left:before{top:23px}.vbtooltip-left:after{margin-left:0;margin-bottom:-16px}[data-vbtooltip]:focus::before{transform: translateX(0);transform: translateY(-12px);}</style><div id="HeatMapScreen" style="z-index: 99999;position: fixed; left: 0; top: 50%; margin-top: -155px;  border:1px solid #000; width: 36px; height: 310px;border-left: 0;display: none;"><img src="https://app.vbout.com//images/heatmap_bg.jpg"></div><div id="FilterMappingMenu" style="background-color: rgb(255, 255, 255); position: fixed; right: -243px; top: 20px; box-shadow: 0px 0px 5px rgb(51, 51, 51); z-index: 999999; border-radius: 7px 0px 0px 7px;"><a style="text-decoration: none; font-family: arial; font-size: 15px; display: none; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px 5px; position: absolute; left: -30px; top: 10px; box-shadow: 0px 0px 5px rgb(51, 51, 51); width: 25px;box-sizing: unset;font-weight: bold;text-align: center;padding: 3px;" id="FilterMappingHeat" data-vbtooltip="Show Filter" class="vbtooltip-left" href="javascript://">x</a><a id="ResponsiveScreen" style="display: none;text-decoration: none; font-family: arial; font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px 5px; position: absolute; left: -35px; top: 100px; box-shadow: 0px 0px 5px rgb(51, 51, 51); width: 25px;box-sizing: unset;" onclick="javascript:void((function(d){if(self!=top||d.getElementById(&#039;toolbar&#039;)&amp;&amp;d.getElementById(&#039;toolbar&#039;).getAttribute(&#039;data-resizer&#039;))return false;d.write(&#039;&lt;!DOCTYPE HTML&gt;&lt;html style=&quot;opacity:0;&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;/&gt;&lt;/head&gt;&lt;body&gt;&lt;a data-viewport=&quot;375&times;667&quot; data-icon=&quot;mobile&quot; &gt;Apple iPhone 7&lt;/a&gt;&lt;a data-viewport=&quot;768x1024&quot; data-icon=&quot;tablet&quot;&gt;Tablet (e.g. Apple iPad 2-3rd, mini)&lt;/a&gt;&lt;a data-viewport=&quot;1920&times;1080&quot; data-icon=&quot;tv&quot;&gt;HDTV 1080p&lt;/a&gt;&lt;script src=&quot;https://app.vbout.com//js/resizer.min.js?v=707536&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&#039;)})(document));" data-vbtooltip="Show Responsive Toolbar" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/map_responsive.png"></a><span style="position: absolute; left: 0px; display: block; background-color: rgb(255, 255, 255); z-index: 9997; width: 10px; height: 40px; top: 6px;"></span><form id="FilterMappingForm" style="padding: 10px;"><div><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by date:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Date" name="FilterField[date]"><option value="0">- Everyday -</option><option value="1">Today</option><option value="2">Yesterday</option><option value="3">Last Week</option><option value="4">Last Month</option></select></div><div><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by Visitors:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Visitors" name="FilterField[visitor]"><option value="0">- Everyone -</option><option value="1">Anonymous Visits</option><option value="2">Subscriber Visits</option></select></div><div style="display: none;"><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by device:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Device" name="FilterField[device]"><option value="">- All devices -</option><option value="0" selected="selected">Desktop Only</option><option value="2">tablets Only</option><option value="1">Mobile Only</option></select></div><div><label style="font-size: 12px; color: #000;display: block;margin-bottom: 5px;">Filter by location:</label><select style="background-color: #ffffff;border: 1px solid #cccccc;width: 220px;height: 30px;line-height: 30px;border-radius: 4px;color: #555555;display: inline-block;font-size: 14px;margin-bottom: 10px;padding: 4px 6px;vertical-align: middle;" id="FilterField_Location" name="FilterField[location]"><option value="0">- Anywhere -</option></select></div><div style="padding-top: 10px;"><p id="ApplyFilterMessage" style="color: green; margin: 0px 0px 10px!important; display: none;">Filter applied...</p><button id="ApplyFilterMappingButton" name="ApplyFilterMappingButton" type="button" style="padding: 5px 20px;font-size: 14px;margin: 0 auto;display: block;width: 100%;">Apply Filter</button><button style="padding: 0;display:none;" id="CloseFilterMappingButton" name="CloseFilterMappingButton" type="button">Close</button></div></form></div><div id="MappingMenu" style="display: none; background-color: rgb(0, 0, 0); position: fixed; right: 0px; top: 20px; box-shadow: 0px 0px 5px rgb(51, 51, 51); z-index: 99999; border-radius: 7px 0px 0px 7px;"><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px;" id="GetHeatMaps" data-vbtooltip="Show Heatmap" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/heat_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: #7cb138; color: rgb(0, 0, 0); padding: 5px; border-radius: 5px 0px 0px;display: none;" id="HideHeatMaps" data-vbtooltip="Hide Heatmap" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/heat_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; padding: 5px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); margin-top: 1px;" id="GetClickMaps" data-vbtooltip="Show ClickMap" class="vbtooltip-left" href="javascript://"><img src="https://app.vbout.com//images/click_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; padding: 5px; background-color: #7cb138; color: rgb(0, 0, 0); margin-top: 1px;display: none;" data-vbtooltip="Hide ClickMap" class="vbtooltip-left" id="HideClickMaps" href="javascript://"><img src="https://app.vbout.com//images/click_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); margin-top: 1px; padding: 5px; border-radius: 0px 0px 0px 5px;" id="GetScrollMaps" class="vbtooltip-left" data-vbtooltip="Show ScrollMap" href="javascript://"><img src="https://app.vbout.com//images/scroll_map.png"></a><a style="text-decoration: none; font-family: arial; font-size: 12px; display: block; background-color: #7cb138; color: rgb(0, 0, 0); margin-top: 1px; padding: 5px; border-radius: 0px 0px 0px 5px;display: none;" data-vbtooltip="Hide ScrollMap" class="vbtooltip-left" id="HideScrollMaps" href="javascript://"><img src="https://app.vbout.com//images/scroll_map.png"></a></div><canvas id="canvas" style="left: 0px; top: 0px; z-index: 99999; position: absolute; opacity: 0.5; display: none;"></canvas><canvas id="scrollcanvas" style="left: 0px; top: 0px; z-index: 99999; position: absolute; opacity: 0.5; display: none;"></canvas>';function vbout_action_mapping_exceute(){window.vbtActionMappingExecuted=!0;var theParent=document.body,theKid=document.createElement("div");theKid.style.width="auto",theKid.style.height="auto",theKid.innerHTML=mappingMenu,theParent.insertBefore(theKid,theParent.firstChild),document.getElementById("FilterField_Device").value=filterDevice,jQuery.get(vbt_baseURL+"track/filters/getcountries",{l:escape([document.location.protocol,"//",document.location.host,document.location.pathname].join("")),_account:_vbsetData.account,_domain:_vbsetData.domain},(function(htmlContentFromServer){jQuery("#FilterField_Location").append(htmlContentFromServer),jQuery("#FilterField_Location").trigger("chosen:updated")})),jQuery("#FilterMappingHeat").click((function(){parseInt(jQuery("#FilterMappingMenu").css("right"))<0?jQuery("#FilterMappingMenu").stop().animate({right:0}):jQuery("#FilterMappingMenu").stop().animate({right:"-243px"})})),jQuery("#ApplyFilterMappingButton").click((function(){!clickmap_loading&&clickmap_active&&(jQuery("#HideClickMaps").trigger("click"),jQuery("#GetClickMaps").trigger("click")),!heatmap_loading&&heatmap_active&&(jQuery("#HideHeatMaps").trigger("click"),jQuery("#GetHeatMaps").trigger("click")),!scrollmap_loading&&scrollmap_active&&(jQuery("#HideScrollMaps").trigger("click"),jQuery("#GetScrollMaps").trigger("click")),jQuery("#ApplyFilterMessage").stop().show().delay(3e3).queue((function(n){jQuery(this).hide()}))})),jQuery("#CloseFilterMappingButton").click((function(){jQuery("#FilterMappingMenu").stop().animate({right:"-243px"})})),jQuery("#GetClickMaps").click((function(){clickmap_loading||(clickmap_loading=!0,jQuery(".vb-overlay").length||(jQuery('<div id="clickmap-overlay" class="vb-overlay"></div>').appendTo("body"),jQuery("#clickmap-overlay").width(jQuery("body").width())),jQuery('<div id="clickmap-loading"></div>').appendTo("body"),jQuery.get(vbt_baseURL+"track/mapclick/get",{l:escape([document.location.protocol,"//",document.location.host,document.location.pathname].join("")),_account:_vbsetData.account,_domain:_vbsetData.domain,_filterdate:jQuery("#FilterField_Date").val(),_filtervisitor:jQuery("#FilterField_Visitors").val(),_filterdevice:jQuery("#FilterField_Device").val(),_filterlocation:jQuery("#FilterField_Location").val(),_maxWidth:jQuery("body").width()},(function(htmlContentFromServer){clickmap_active=!0,clickmap_loading=!1,showBodyBG(),jQuery("#clickmap-loading").remove(),jQuery(htmlContentFromServer).appendTo("body"),jQuery("#clickmap-container").width(jQuery("body").width()).css("overflow-x","hidden"),jQuery("#clickmap-container").css("position","static"),jQuery("#GetClickMaps").hide(),jQuery("#HideClickMaps").css("display","block").show()})))})),jQuery("#HideClickMaps").click((function(){clickmap_loading||(clickmap_active=!1,hideBodyBG(),clickmap_active||heatmap_active||scrollmap_active||jQuery(".vb-overlay").remove(),jQuery("#clickmap-container").remove(),jQuery("#clickmap-loading").remove(),jQuery(this).hide(),jQuery("#GetClickMaps").css("display","block").show())})),jQuery("#GetScrollMaps").click((function(){if(!scrollmap_loading){scrollmap_loading=!0,jQuery(".vb-overlay").length||jQuery('<div id="scrollmap-overlay" class="vb-overlay"></div>').appendTo("body"),jQuery('<div id="scrollmap-loading"></div>').appendTo("body");var body=document.body,html=document.documentElement,height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight),dimension=[jQuery("body").width(),height];jQuery("#scrollcanvas").attr("width",dimension[0]),jQuery("#scrollcanvas").attr("height",dimension[1]),jQuery.get(vbt_baseURL+"track/scrollheat/get",{l:escape([document.location.protocol,"//",document.location.host,document.location.pathname].join("")),_account:_vbsetData.account,_domain:_vbsetData.domain,_filterdate:jQuery("#FilterField_Date").val(),_filtervisitor:jQuery("#FilterField_Visitors").val(),_filterdevice:jQuery("#FilterField_Device").val(),_filterlocation:jQuery("#FilterField_Location").val()},(function(data){scrollmap_active=!0,scrollmap_loading=!1,showBodyBG(),jQuery("#scrollmap-overlay").remove(),jQuery("#scrollmap-loading").remove(),jQuery("#scrollcanvas").show(),new ScrollHeatMap("scrollcanvas","https://app.vbout.com/images/scrollmap.png",dimension[0],dimension[1],data,{screenshotAlpha:.6,heatmapAlpha:.8}),jQuery("#GetScrollMaps").hide(),jQuery("#HeatMapScreen").show(),jQuery("#HideScrollMaps").css("display","block").show()}))}})),jQuery("#HideScrollMaps").click((function(){scrollmap_loading||(scrollmap_active=!1,jQuery("#scrollcanvas").hide(),hideBodyBG(),clickmap_active||heatmap_active||scrollmap_active||jQuery(".vb-overlay").remove(),jQuery(this).hide(),heatmap_active||jQuery("#HeatMapScreen").hide(),jQuery("#GetScrollMaps").css("display","block").show())})),jQuery("#GetHeatMaps").click((function(){if(!heatmap_loading){heatmap_loading=!0,jQuery(".vb-overlay").length||jQuery('<div id="heatmap-overlay" class="vb-overlay"></div>').appendTo("body"),jQuery('<div id="heatmap-loading"></div>').appendTo("body");var dimension=[jQuery("body").width(),jQuery("body").height()];jQuery("#canvas").attr("width",dimension[0]),jQuery("#canvas").attr("height",dimension[1]),jQuery.get(vbt_baseURL+"track/mapheat/get",{l:escape([document.location.protocol,"//",document.location.host,document.location.pathname].join("")),_account:_vbsetData.account,_domain:_vbsetData.domain,_filterdate:jQuery("#FilterField_Date").val(),_filtervisitor:jQuery("#FilterField_Visitors").val(),_filterdevice:jQuery("#FilterField_Device").val(),_filterlocation:jQuery("#FilterField_Location").val()},(function(data){heatmap_active=!0,heatmap_loading=!1,showBodyBG(),jQuery("#heatmap-loading").remove(),jQuery("#canvas").show();var heat=vbout_simpleheat(canvas);heat.clear(),heat.data(data),heat.max(36),heat.draw(),jQuery("#GetHeatMaps").hide(),jQuery("#HeatMapScreen").show(),jQuery("#HideHeatMaps").css("display","block").show()}))}})),jQuery("#HideHeatMaps").click((function(){heatmap_loading||(heatmap_active=!1,hideBodyBG(),jQuery("#canvas").hide(),clickmap_active||heatmap_active||scrollmap_active||jQuery(".vb-overlay").remove(),jQuery(this).hide(),scrollmap_active||jQuery("#HeatMapScreen").hide(),jQuery("#GetHeatMaps").css("display","block").show())})),loadChosen()}function showBodyBG(){(clickmap_active||heatmap_active||scrollmap_active)&&jQuery("body").css("overflow-x","hidden")}function hideBodyBG(){clickmap_active||heatmap_active||scrollmap_active||jQuery("body").css("overflow-x","")}function loadChosen(){try{jQuery("#FilterField_Location").chosen(),jQuery("#FilterField_Visitors").chosen()}catch(e){}}vbt_loadStyle(vbt_baseURL+"/scripts/plugins/chosen/chosen.css?v=1.1.5"),vbt_loadJs(vbt_baseURL+"/scripts/plugins/chosen/chosen142.jquery.min.js?v=1.0",(function(){loadChosen()})),vbt_loadJs(vbt_baseURL+"/js/vbout-heatmap-draw.js?v=1.0.1",(function(){console.log("Simple heat is now loaded...")})),vbt_loadJs(vbt_baseURL+"trackerjs/scrollheatmap.js?n",(function(){console.log("Scroll heat is now loaded..."),vbout_action_mapping_exceute()}))}($vbtJQ)}if(isHeatmapEnabled)function vbt_execHeatmap(ssIp,curCountry){!function(jQuery){var s;function sendHeat(){if(heat_data.length){var s=new RegExp("[; ]__ssId=([^\\s;]*)"),e=(" "+document.cookie).match(s);ssId=e?unescape(e[1]):0;var a=new RegExp("[; ]__vbtrk=([^\\s;]*)"),t=(" "+document.cookie).match(a);ssTrack=t?unescape(t[1]):"";var n=new RegExp("[; ]__vbsess=([^\\s;]*)"),o=(" "+document.cookie).match(n);sessId=o?unescape(o[1]):0,jQuery.post(vbt_baseURL+"track/mapheat?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,{h:heat_data,ssId:ssId,ssIp:ssIp,sessId:sessId,ssTrack:ssTrack,_c:curCountry,platform:navigator.platform,userAgent:navigator.userAgent,l:escape([document.location.protocol,"//",document.location.host,document.location.pathname].join(""))}).done((function(){heat_data=[]}))}}(s=jQuery).fn.saveClicks=function(){s(this).bind("mousedown.clickmap",(function(e){var c=new RegExp("[; ]__ssId=([^\\s;]*)"),n=(" "+document.cookie).match(c);ssId=n?unescape(n[1]):0;var a=new RegExp("[; ]__vbsess=([^\\s;]*)"),o=(" "+document.cookie).match(a);sessId=o?unescape(o[1]):0;var t=new RegExp("[; ]__vbtrk=([^\\s;]*)"),i=(" "+document.cookie).match(t);ssTrack=i?unescape(i[1]):"",s.post(vbt_baseURL+"track/mapclick?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,{x:e.pageX,y:e.pageY,ssId:ssId,ssIp:ssIp,sessId:sessId,ssTrack:ssTrack,_c:curCountry,platform:navigator.platform,userAgent:navigator.userAgent,l:escape([document.location.protocol,"//",document.location.host,document.location.pathname].join(""))})}))},s.fn.stopSaveClicks=function(){s(this).unbind("mousedown.clickmap")},jQuery((function(){jQuery(document).saveClicks()}));var heat_data=[],t;function sendScrollHeat(){if(scrollheat_data.length&&scrollheat_data.length>2&&!scrollheatSending){scrollheatSending=!0;var t=new RegExp("[; ]__ssId=([^\\s;]*)"),s=(" "+document.cookie).match(t);ssId=s?unescape(s[1]):0;var o=new RegExp("[; ]__vbtrk=([^\\s;]*)"),e=(" "+document.cookie).match(o);ssTrack=e?unescape(e[1]):"",jQuery.post(vbt_baseURL+"track/scrollheat?_account="+_vbsetData.account+"&_domain="+_vbsetData.domain,{h:scrollheat_data,scrn:jQuery(window).height(),ssId:ssId,ssIp:ssIp,ssTrack:ssTrack,_c:curCountry,platform:navigator.platform,userAgent:navigator.userAgent,l:escape([document.location.protocol,"//",document.location.host,document.location.pathname].join(""))}).done((function(){scrollheat_data=[],scrollheatSending=!1}))}}!function(s){s.fn.saveHeats=function(){s(this).bind("mousemove",(function(s){var e={};e.x=s.pageX,e.y=s.pageY,heat_data.push(e)}))},s.fn.stopSaveHeat=function(){s(this).unbind("mousemove")}}(jQuery),jQuery((function(){jQuery(document).saveHeats(),setInterval((function(){sendHeat()}),5e3)})),(t=jQuery).fn.saveScrollHeats=function(){t(this).bind("scroll",(function(s){scrollTimeout&&clearTimeout(scrollTimeout),scrollTimeout=setTimeout((function(){scrollheat_data.push(parseInt(t(window).scrollTop()))}),100)}))},t.fn.stopSaveScrollHeat=function(){t(this).unbind("mousemove")},jQuery((function(){jQuery(document).saveScrollHeats(),setInterval((function(){sendScrollHeat()}),500)}))}($vbtJQ)}function __checkIfMobileDevice(){var isMobile;return/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())}try{!function(){var onReadyCheck;function getStorage(){return{localStoreCookie:"vbtLSCookie-",localStoreSupport:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},set:function(t,o,e){if(e){var r=new Date;r.setTime(r.getTime()+24*e*60*60*1e3);var l="; expires="+r.toGMTString()}else l="";this.localStoreSupport()?localStorage.setItem(t,o):document.cookie=this.localStoreCookie+t+"="+o+l+"; path=/"},get:function(t){if(this.localStoreSupport())return localStorage.getItem(t);for(var o=this.localStoreCookie+t+"=",e=document.cookie.split(";"),r=0;r<e.length;r++){for(var l=e[r];" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(o))return l.substring(o.length,l.length)}return null},remove:function(t){this.localStoreSupport()?localStorage.removeItem(t):this.set(this.localStoreCookie+t,"",-1)}}}function empty(r){var n,t,e,f=[void 0,null,!1,0,"","0"];for(t=0,e=f.length;t<e;t++)if(r===f[t])return!0;if("object"==typeof r){for(n in r)if(r.hasOwnProperty(n))return!1;return!0}return!1}onReadyCheck=setInterval((function(){if(document&&document.getElementsByTagName&&document.getElementById&&document.body){clearInterval(onReadyCheck);var storage=getStorage(),input,forms;empty(storage.get("vbtEFRefLegacy"))&&storage.set("vbtEFRefLegacy",document.referrer);for(var i=0,len=(forms=document.getElementsByTagName("form")).length;i<len;i++)try{forms[i].getAttribute("action").indexOf("vbout.com/embedcode/submit/")>-1&&-1==forms[i].getAttribute("action").indexOf("_format=page")&&((input=document.createElement("input")).setAttribute("type","hidden"),input.setAttribute("name","_vbtRef"),input.setAttribute("value",storage.get("vbtEFRefLegacy")),forms[i].appendChild(input))}catch(e){}}}),13)}()}catch(e){}function disableSubmitButton(form,disabled){for(var func=!1===disabled?"removeAttribute":"setAttribute",btns,i=0,len=(btns=form.getElementsByTagName("input")).length;i<len;i++)"submit"==btns[i].type&&btns[i][func]("disabled","DISABLED");for(var btns,i=0,len=(btns=form.getElementsByTagName("button")).length;i<len;i++)"submit"==btns[i].type&&btns[i][func]("disabled","DISABLED")}function GDPRchecked(inputs){for(var i=0,len=inputs.length;i<len;i++)if((" "+inputs[i].className+" ").indexOf(" requiredOption ")>-1&&!inputs[i].checked)return!1;return!0}!function(e,o){e.MicroModal=o()}(this,(function(){"use strict";var e=function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,o){for(var t=0;t<o.length;t++){var i=o[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(o,t,i){return t&&e(o.prototype,t),i&&e(o,i),o}}(),t=function(e){if(Array.isArray(e)){for(var o=0,t=Array(e.length);o<e.length;o++)t[o]=e[o];return t}return Array.from(e)};return function(){var i=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],n=function(){function n(o){var i=o.targetModal,a=o.triggers,r=void 0===a?[]:a,s=o.onShow,l=void 0===s?function(){}:s,c=o.onClose,d=void 0===c?function(){}:c,u=o.openTrigger,f=void 0===u?"data-micromodal-trigger":u,h=o.closeTrigger,v=void 0===h?"data-micromodal-close":h,g=o.disableScroll,m=void 0!==g&&g,b=o.disableFocus,y=void 0!==b&&b,w=o.awaitCloseAnimation,k=void 0!==w&&w,p=o.debugMode,E=void 0!==p&&p;e(this,n),this.modal=document.getElementById(i),this.config={debugMode:E,disableScroll:m,openTrigger:f,closeTrigger:v,onShow:l,onClose:d,awaitCloseAnimation:k,disableFocus:y},r.length>0&&this.registerTriggers.apply(this,t(r)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}return o(n,[{key:"registerTriggers",value:function(){for(var e=this,o=arguments.length,t=Array(o),i=0;i<o;i++)t[i]=arguments[i];t.forEach((function(o){o.addEventListener("click",(function(){return e.showModal()}))}))}},{key:"showModal",value:function(){var box=this.modal.getElementsByClassName("vbtSitePopup")[0];this.modal.setAttribute("data-vbtpopup",box?box.id:""),this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add("is-open"),this.setFocusToFirstNode(),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.onShow(this.modal)}},{key:"closeModal",value:function(){var e=this.modal;this.modal.setAttribute("data-vbtpopup",""),this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement.focus(),this.config.onClose(this.modal),this.config.awaitCloseAnimation?this.modal.addEventListener("animationend",(function o(){e.classList.remove("is-open"),e.removeEventListener("animationend",o,!1)}),!1):e.classList.remove("is-open")}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var o=document.querySelector("body");switch(e){case"enable":Object.assign(o.style,{overflow:"initial",height:"initial"});break;case"disable":Object.assign(o.style,{overflow:"hidden",height:"100vh"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&(this.closeModal(),e.preventDefault())}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.maintainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(i);return Object.keys(e).map((function(o){return e[o]}))}},{key:"setFocusToFirstNode",value:function(){if(!this.config.disableFocus){var e=this.getFocusableNodes();e.length&&e[0].focus()}}},{key:"maintainFocus",value:function(e){var o=this.getFocusableNodes();if(this.modal.contains(document.activeElement)){var t=o.indexOf(document.activeElement);e.shiftKey&&0===t&&(o[o.length-1].focus(),e.preventDefault()),e.shiftKey||t!==o.length-1||(o[0].focus(),e.preventDefault())}else o[0].focus()}}]),n}(),a=null,r=function(e,o){var t=[];return e.forEach((function(e){var i=e.attributes[o].value;void 0===t[i]&&(t[i]=[]),t[i].push(e)})),t},s=function(e){if(!document.getElementById(e))return console.warn("MicroModal v0.3.1: ❗Seems like you have missed %c'"+e+"'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'+e+'"></div>'),!1},l=function(e){if(e.length<=0)return console.warn("MicroModal v0.3.1: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'),!1},c=function(e,o){if(l(e),!o)return!0;for(var t in o)s(t);return!0};return{init:function(e){var o=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),i=[].concat(t(document.querySelectorAll("["+o.openTrigger+"]"))),a=r(i,o.openTrigger);if(!0!==o.debugMode||!1!==c(i,a))for(var s in a){var l=a[s];o.targetModal=s,o.triggers=[].concat(t(l)),new n(o)}},show:function(e,o){var t=o||{};t.targetModal=e,!0===t.debugMode&&!1===s(e)||(a=new n(t)).showModal()},close:function(){a.closeModal()}}}()})),function(){var jQueryLoad=function(source,$jQuery,migrate){if($jQuery)return $vbtJQ=$jQuery,console.log("jQuery > vbtJQ has been loaded from "+source),console.log("jQuery > vbtJQ Version: "+$vbtJQ.fn.jquery),migrate||loadJQueryMigrate(),_exec_vbout();var jQueryScript="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js";console.log("jQuery > Try to load jQuery from "+source),vbt_loadJs(jQueryScript,(function(){return $vbtJQ=jQuery.noConflict(),console.log("jQuery > vbtJQ has been loaded from "+source),console.log("jQuery > vbtJQ Version: "+$vbtJQ.fn.jquery),loadJQueryMigrate(),_exec_vbout()}))};"function"==typeof define&&define.amd&&"function"==typeof require?require(["jquery"],(function($){require(["jquery/jquery-migrate"],(function(migrate){jQueryLoad("requirejs-migrate",$,!0)}),(function(){jQueryLoad("requirejs",$)}))}),(function(){jQueryLoad("CDN (requirejs error)")})):"jQuery"in window?jQuery.fn.on&&jQuery.fn.ajaxComplete?(_jqueryAlreadyLoaded=!0,_jqueryCurrentVersion=jQuery.fn.jquery,jQueryLoad("jQuery (exist)",window.jQuery)):jQueryLoad("CDN (newer)"):jQueryLoad("CDN (not exist)")}();    if(!isMappingFlagEnabled){
        const applicationServerKey = "";
        const byPassModal = true;
        !function(vBrandingWebpush){var runBrowserPush=!1,isIncognito=!1,push_url,push_url_part,protocol,isDeviceiOS;function checkIncognito(){if("MozAppearance"in document.documentElement.style)isIncognito=!navigator.serviceWorker;else{var fs=window.RequestFileSystem||window.webkitRequestFileSystem;if(!fs)return;fs(window.TEMPORARY,100,(function(fs){isIncognito=!1}),(function(err){isIncognito=!0}))}}if(checkIncognito(),isIncognito)console.warn("Browser push is not supported in Incognito mode");else if("https"==window.location.href.split(":/")[0]){if(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))console.warn("Browser Push is not supported for iOS Devices.");else if(runBrowserPush=!0){var push_ssid=vbt_getCookie("__ssId")||null,isNotificationBlocked=!1,page_url=window.location.href;function get_push_ssid(){return push_ssid=visitor.ssId||null}function loadFile(path,type,callback){var fileref;if("js"==type)(fileref=document.createElement("script")).setAttribute("type","text/javascript"),fileref.readyState?fileref.onreadystatechange=function(){"loaded"!==fileref.readyState&&"complete"!==fileref.readyState||(fileref.onreadystatechange=null,callback())}:fileref.onload=function(){callback()},fileref.setAttribute("src",path);else if("css"==type){var fileref;(fileref=document.createElement("link")).setAttribute("rel","stylesheet"),fileref.setAttribute("type","text/css"),fileref.setAttribute("href",path)}document.getElementsByTagName("head")[0].appendChild(fileref)}if(!("serviceWorker"in navigator))return void console.warn("Service workers are not supported by this browser");if(!("PushManager"in window))return void console.warn("Push notifications are not supported by this browser");if(!("showNotification"in ServiceWorkerRegistration.prototype))return void console.warn("Notifications are not supported by this browser");function urlBase64ToUint8Array(base64String){const padding="=".repeat((4-base64String.length%4)%4),base64=(base64String+padding).replace(/\-/g,"+").replace(/_/g,"/"),rawData=window.atob(base64),outputArray=new Uint8Array(rawData.length);for(let i=0;i<rawData.length;++i)outputArray[i]=rawData.charCodeAt(i);return outputArray}function push_subscribe(){navigator.serviceWorker.ready.then(serviceWorkerRegistration=>serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array(applicationServerKey)})).then(subscription=>push_sendSubscriptionToServer(subscription,"POST")).then(subscription=>subscription).catch(e=>(console.log("error:"+e),"denied"===Notification.permission?(console.warn("Notifications are denied by the user."),push_permissionLog("Denied")):(console.error("Impossible to subscribe to push notifications",e),push_permissionLog("Skipped"))))}function push_permissionLog(type){return ssid=push_ssid||get_push_ssid(),fetch(vbt_baseURL+"index.php?r=WebPush/PermissionLogs",{method:"POST",body:JSON.stringify({type:type,pid:profileID,eid:ssid,source_id:domainID,source_type:1})}).then(response=>response.ok?response:Promise.reject("error")).catch(error=>Promise.reject(error.message))}function push_updateSubscription(){navigator.serviceWorker.ready.then(serviceWorkerRegistration=>serviceWorkerRegistration.pushManager.getSubscription()).then(subscription=>{if(subscription)return push_sendSubscriptionToServer(subscription,"PUT");var is_subscriber=!1;isSubscriber().then(res=>{if(!(is_subscriber=res)){var match_rule=!0;checkPageRules().then(res=>{(match_rule=res)&&(byPassModal?applicationServerKey?isNotificationBlocked?console.log("Browser push is blocked by default on this browser"):openDefaultModal():console.log("Browser push key is not loaded correctly"):(loadFile(vbt_baseURL+"/css/webpush/popup/tingle.min.css","css"),loadFile(vbt_baseURL+"/css/webpush/popup/vbout-popup.css","css"),loadFile(vbt_baseURL+"/js/webpush/popup/tingle.min.js?v=0.1","js",(function(){applicationServerKey?isNotificationBlocked?console.log("Browser push is blocked by default on this browser"):showModal():console.log("Browser push key is not loaded correctly")}))))})}})}).then(subscription=>subscription).catch(e=>{console.error("Error when updating the subscription",e)})}function push_unsubscribe(){console.trace(),navigator.serviceWorker.ready.then(serviceWorkerRegistration=>serviceWorkerRegistration.pushManager.getSubscription()).then(subscription=>{if(subscription)return console.log("unsubscribe"),push_sendSubscriptionToServer(subscription,"DELETE");changePushState("disabled")}).then(subscription=>subscription.unsubscribe()).then(()=>changePushState("disabled")).catch(e=>{console.error("Error when unsubscribing the user",e),changePushState("disabled")})}function push_sendSubscriptionToServer(subscription,method){const key=subscription.getKey("p256dh"),token=subscription.getKey("auth");return ssid=push_ssid||get_push_ssid(),fetch(vbt_baseURL+"index.php?r=WebPush/ManageSubscription",{method:method,body:JSON.stringify({pid:profileID,eid:ssid,c_endpoint:subscription.endpoint,c_key:key?btoa(String.fromCharCode.apply(null,new Uint8Array(key))):null,c_token:token?btoa(String.fromCharCode.apply(null,new Uint8Array(token))):null,source_id:domainID,source_type:1})}).then(()=>subscription)}function isSubscriber(){return ssid=push_ssid||get_push_ssid(),fetch(vbt_baseURL+"index.php?r=WebPush/IsSubscriber",{method:"POST",body:JSON.stringify({pid:profileID,source_id:domainID,source_type:1,eid:ssid})}).then(response=>response.json()).then((function(data){if("data"in data)return!!data.data})).catch(error=>console.error("Error:",error))}function showModal(){return ssid=push_ssid||get_push_ssid(),fetch(vbt_baseURL+"index.php?r=WebPush/PopupDisplaySettings",{method:"POST",body:JSON.stringify({pid:profileID,source_id:domainID,source_type:1,eid:ssid})}).then(response=>response.json()).then((function(data){"data"in data&&data.data&&openModal()})).catch(error=>console.error("Error:",error))}function openModal(){return fetch(vbt_baseURL+"index.php?r=WebPush/PopupSettings",{method:"POST",body:JSON.stringify({pid:profileID,source_id:domainID,source_type:1})}).then(response=>response.json()).then((function(data){ssid=push_ssid||get_push_ssid();let popup_settings=data.data,delay_time=0;if(popup_settings.delay_time&&(delay_time=1e3*popup_settings.delay_time),1==popup_settings.show_contact&&null!==ssid&&0==popup_settings.show_anonymous||1==popup_settings.show_anonymous&&null==ssid&&0==popup_settings.show_contact||1==popup_settings.show_contact&&1==popup_settings.show_anonymous){var modal=new tingle.modal({footer:!0,stickyFooter:!0,closeMethods:["button"],onOpen:function(){},onClose:function(){},beforeOpen:function(){},beforeClose:function(){return!0}});if(popup_settings.popup_icon?modal.setContent('<div class="popover-body"><div class="popover-body-icon"><img alt="popup icon" class="default-icon" src="'+popup_settings.popup_icon+'"></div><div class="popover-body-message">'+popup_settings.action_message+"</div></div>"):modal.setContent('<div class="popover-body"><div class="popover-body-message">'+popup_settings.action_message+"</div></div>"),modal.addFooterBtn(popup_settings.allow_button,"tingle-btn tingle-btn--pull-right tingle-btn--primary",(function(){push_permissionLog("accept"),push_subscribe(),modal.close()})),modal.addFooterBtn(popup_settings.cancel_button,"tingle-btn tingle-btn--pull-right tingle-btn--default",(function(){push_permissionLog("cancel"),modal.close()})),vBrandingWebpush){var brandingBtn=document.createElement("span");brandingBtn.setAttribute("class","tingle-btn tingle-btn--default tingle-btn--pull-left"),brandingBtn.setAttribute("style","padding-right: 0;padding-left: 0;margin-right: 0;margin-left: 0;"),brandingBtn.innerHTML=vBrandingWebpush,modal.modalBoxFooter.appendChild(brandingBtn)}setTimeout((function(){modal.open()}),delay_time)}})).catch(error=>console.error("Error:",error))}function openDefaultModal(){return fetch(vbt_baseURL+"/index.php?r=WebPush/DefaultPopupSettings",{method:"POST",body:JSON.stringify({pid:profileID,source_id:domainID,source_type:1})}).then(response=>response.json()).then((function(data){ssid=push_ssid||get_push_ssid();let popup_settings=data.data,delay_time=0;popup_settings.delay_time&&(delay_time=1e3*popup_settings.delay_time),(1==popup_settings.show_contact&&null!==ssid&&0==popup_settings.show_anonymous||1==popup_settings.show_anonymous&&null==ssid&&0==popup_settings.show_contact||1==popup_settings.show_contact&&1==popup_settings.show_anonymous)&&setTimeout((function(){push_subscribe()}),delay_time)})).catch(error=>console.error("Error:",error))}function checkPageRules(){return fetch(vbt_baseURL+"index.php?r=WebPush/GetDomainPageRules",{method:"POST",body:JSON.stringify({source_id:domainID,pid:profileID})}).then(response=>response.json()).then((function(data){if("data"in data){var popup_display_data=data.data,popup_display_data_count,match_result;return popup_display_data.length>0&&(match_result=vbt_matchUrls(page_url,popup_display_data,!1)),!!match_result}return!0})).catch(error=>console.error("Error:",error))}"denied"===Notification.permission&&(console.warn("Notifications are denied by the user"),isNotificationBlocked=!0),navigator.serviceWorker.register("/vbt-sdk.js").then(()=>{console.log("[SW] Service worker has been registered"),push_updateSubscription()},e=>{navigator.serviceWorker.register("/vbout-sdk.js").then(()=>{console.log("[SW] Service worker has been registered"),push_updateSubscription()},e=>{console.error("[SW] Service worker registration failed",e)})})}}else console.warn("Browser Push is only supported over HTTPS.")}(vBrandingWebpush||null);    }
})(window._vbset, window._vbTracker);
function triggerHeatMapView(){
    var responsiveEle =  document.getElementById('ResponsiveScreen');
	if (typeof(responsiveEle) != 'undefined' && responsiveEle != null)
	{
	  responsiveEle.click();
	}
}
window.addEventListener ? window.addEventListener("load",triggerHeatMapView,false) : window.attachEvent && window.attachEvent("onload",triggerHeatMapView);
})();
